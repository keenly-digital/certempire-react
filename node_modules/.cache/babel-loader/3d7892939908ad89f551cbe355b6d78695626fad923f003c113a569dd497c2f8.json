{"ast":null,"code":"var _jsxFileName = \"/Users/megamac/Dev/GitHub/projects/certempire-react/src/pages/SimulationPage.tsx\",\n  _s = $RefreshSig$();\n// src/pages/SimulationPage.tsx\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useParams } from 'react-router-dom';\nimport { supabase } from '../supabaseClient';\nimport HtmlRenderer from '../components/utils/HtmlRenderer'; // 1. Import the new component\n\n// MAKING CHANGES NOW.\n\n// --- SVG Icons ---\n//const IconMagnifyingGlass = () => <svg width=\"20\" height=\"20\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159L11.5 12.5L12.5 11.5L10.0158 9.30885C9.42248 9.75587 8.68594 10.0345 7.89932 10.0883L6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5C10 7.50556 9.61334 8.42373 9.00001 9.13098L9.30884 10.0159Z\" fill=\"#757575\"></path></svg>;\n//const IconFlag = () => <svg width=\"16\" height=\"16\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M4.5 14.5V4.5H12.5L9.5 7L12.5 9.5H4.5ZM3 3.5H14V10.5L10 7.5L14 4.5H4V14.5H3V3.5Z\" fill=\"currentColor\"></path></svg>;\n//const IconDownload = () => <svg width=\"18\" height=\"18\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M4 6H2V12.5C2 12.7761 2.22386 13 2.5 13H12.5C12.7761 13 13 12.7761 13 12.5V6H11V12H4V6ZM7.5 10L11 5H8V2H7V5H4L7.5 10Z\" fill=\"currentColor\"></path></svg>;\n//const IconEye = () => <svg width=\"16\" height=\"16\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M7.5 11C4.79322 11 2.49241 9.2993 1.05532 7.50001C2.49241 5.70072 4.79322 4 7.5 4C10.2068 4 12.5076 5.70072 13.9447 7.50001C12.5076 9.2993 10.2068 11 7.5 11ZM7.5 3C4.33776 3 1.68988 5.00373 0.160645 6.88398L0.116041 6.94165C-0.0386803 7.14378 -0.0386803 7.85624 0.116041 8.05837L0.160645 8.11604C1.68988 9.99629 4.33776 12 7.5 12C10.6622 12 13.3101 9.99629 14.8394 8.11604L14.884 8.05837C15.0387 7.85624 15.0387 7.14378 14.884 6.94165L14.8394 6.88398C13.3101 5.00373 10.6622 3 7.5 3ZM7.5 9C6.40237 9 5.50655 8.11289 5.5 7.00001C5.50655 5.88713 6.40237 5.00001 7.5 5.00001C8.59763 5.00001 9.49345 5.88713 9.5 7.00001C9.49345 8.11289 8.59763 9 7.5 9Z\" fill=\"currentColor\"></path></svg>;\n//const IconEyeSlash = () => <svg width=\"16\" height=\"16\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M1.3415 13.6585L13.6582 1.34176L12.9511 0.634691L0.634433 12.9514L1.3415 13.6585ZM4.39893 9.60107C3.13626 8.87784 2.15372 7.84628 1.05532 7.5C2.49241 5.70072 4.79322 4 7.5 4C8.61439 4 9.66427 4.29891 10.584 4.80878L9.49989 6.00001C9.49561 5.92548 9.24345 5.88713 9.5 7C9.49345 8.11289 8.59763 9 7.5 9C6.81406 9 6.20237 8.68594 5.86902 8.13098L4.39893 9.60107ZM14.8394 6.88398C13.5936 5.25338 11.6622 3 7.5 3C6.59763 3 5.75655 3.20237 5.00001 3.55837L6.50001 5C6.40237 5 5.50655 5.88713 5.5 7C5.50655 7.24345 5.57452 7.46548 5.68988 7.68988L7.584 9.584C8.75655 9.42548 9.49345 8.49345 9.5 7.41594L13.8839 12.8394C14.4934 12.1129 14.8394 11.2434 14.8394 10.5C14.8394 9.99629 13.3101 8.11604 14.884 8.05837C15.0387 7.85624 15.0387 7.14378 14.884 6.94165L14.8394 6.88398Z\" fill=\"currentColor\"></path></svg>;\n\n// --- Type Definitions ---\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// --- Helper function ---\n\n/*\n const getAllQuestions = (topics: Record<string, Topic>): Question[] => {\n  if (!topics) return [];\n  let questions: Question[] = [];\n  Object.values(topics).forEach((topic: Topic) => {\n    if (topic.questions && Array.isArray(topic.questions)) {\n      questions.push(...topic.questions);\n    }\n  });\n  return questions.map((q, index) => ({ ...q, question_number: (index + 1).toString() }));\n};\n */\n\nconst flattenItems = topics => {\n  const flatList = [];\n  Object.entries(topics).forEach(([topicKey, topic]) => {\n    if (topic.topic_name) {\n      flatList.push({\n        type: 'topic',\n        content: {\n          title: topic.topic_name,\n          caseStudyCount: topic.case_study ? 1 : 0\n        }\n      });\n    }\n    if (topic.case_study) {\n      var _topic$questions;\n      flatList.push({\n        type: 'case_study',\n        content: {\n          title: topicKey,\n          description: topic.case_study,\n          questionsCount: ((_topic$questions = topic.questions) === null || _topic$questions === void 0 ? void 0 : _topic$questions.length) || 0\n        }\n      });\n    }\n    (topic.questions || []).forEach((q, qIndex) => {\n      flatList.push({\n        type: 'question',\n        content: {\n          ...q,\n          question_number: q.question_number || (qIndex + 1).toString()\n        }\n      });\n    });\n  });\n  return flatList;\n};\n\n// --- Styled Components (Full Definitions) ---\nconst PageContainer = styled.div` display: flex; flex-direction: column; gap: 16px; `;\n_c = PageContainer;\nconst HeaderContainer = styled.div` display: flex; flex-direction: column; gap: 16px; `;\n// const HeaderTopRow = styled.div` display: flex; justify-content: space-between; align-items: center; gap: 16px; flex-wrap: wrap; `;\n_c2 = HeaderContainer;\nconst FileName = styled.h2` color: #2c2c54; font-weight: bold; font-size: 22px; `;\n// const HeaderActions = styled.div` display: flex; align-items: center; gap: 12px; `;\n//const SearchInput = styled.div` display: flex; align-items: center; background-color: white; border: 1px solid #E0E0E0; border-radius: 12px; padding: 0 12px; width: 250px; input { border: none; outline: none; padding: 12px 8px; font-size: 14px; flex-grow: 1; } `;\n// const GoToButton = styled.button` background: none; border: 1px solid #E0E0E0; padding: 8px 12px; border-radius: 12px; cursor: pointer; display: flex; align-items: center; gap: 8px; font-weight: bold; `;\n// const DownloadButton = styled.button` background-color: #673AB7; color: white; border: none; border-radius: 12px; padding: 10px 16px; font-weight: 500; cursor: pointer; display: flex; align-items: center; gap: 8px; `;\n// const GoToFieldContainer = styled.div<{ $show: boolean; }>` max-height: ${({ $show }) => $show ? '60px' : '0'}; display: flex; justify-content: center; align-items: center; gap: 8px; padding: ${({ $show }) => $show ? '8px 0' : '0'}; overflow: hidden; transition: all 0.3s ease-in-out; opacity: ${({ $show }) => $show ? '1' : '0'}; `;\n_c3 = FileName;\nconst ContentContainer = styled.div` background-color: white; border-radius: 12px; border: 1px solid #E0E0E0; `;\n// const TopicHeader = styled.div` display: flex; align-items: center; gap: 16px; padding: 24px; border-bottom: 1px solid #f0f0f0; font-size: 18px; font-weight: bold; color: #424242;`;\n_c4 = ContentContainer;\nconst CaseStudyContainer = styled.div` background-color: rgba(239, 234, 254, 0.4); border-bottom: 1px solid rgba(103, 58, 183, 0.2); padding: 26px; `;\n_c5 = CaseStudyContainer;\nconst QuestionCardContainer = styled.div` padding: 26px; `;\n_c6 = QuestionCardContainer;\nconst QuestionHeader = styled.div` display: flex; align-items: flex-start; gap: 18px; margin-bottom: 24px; `;\n_c7 = QuestionHeader;\nconst QuestionNumber = styled.div` background-color: rgba(103, 58, 183, 0.12); color: #673AB7; font-weight: bold; font-size: 16px; padding: 12px; border-radius: 10px; `;\n// const QuestionText = styled.div` font-size: 17px; font-weight: 500; line-height: 1.34; flex: 1; img { max-width: 100%; border-radius: 8px; margin-top: 10px; } `;\n_c8 = QuestionNumber;\nconst Label = styled.p` color: #BDBDBD; font-weight: 600; font-size: 12px; text-transform: uppercase; letter-spacing: 0.8px; margin-bottom: 8px; `;\n_c9 = Label;\nconst OptionsList = styled.div` display: flex; flex-direction: column; gap: 6px; padding-left: 76px; @media(max-width: 600px) { padding-left: 0; } `;\n_c0 = OptionsList;\nconst OptionItem = styled.div` border: 1.1px solid ${({\n  $isCorrect\n}) => $isCorrect ? '#2E7D32' : '#E0E0E0'}; background-color: ${({\n  $isCorrect\n}) => $isCorrect ? '#E8F5E9' : 'transparent'}; border-radius: 8px; padding: 11px 14px; font-size: 15px; line-height: 1.35; img { max-width: 100%; border-radius: 8px; margin-top: 10px; } `;\n_c1 = OptionItem;\nconst ActionButtons = styled.div` display: flex; justify-content: flex-end; gap: 8px; margin-top: 26px; `;\n_c10 = ActionButtons;\nconst PrimaryButton = styled.button` border: none; background-color: #673AB7; color: white; padding: 10px 16px; border-radius: 8px; cursor: pointer; font-weight: 500; `;\n_c11 = PrimaryButton;\nconst ExplanationSection = styled.div` padding-top: 16px; margin-top: 16px; border-top: 1.1px solid #E0E0E0; img { max-width: 100%; border-radius: 8px; margin-top: 10px; } `;\n_c12 = ExplanationSection;\nconst PaginationContainer = styled.div` display: flex; justify-content: space-between; align-items: center; padding: 16px 24px; background-color: white; border: 1px solid #E0E0E0; border-radius: 12px; `;\n_c13 = PaginationContainer;\nconst PageButton = styled.button` background: none; border: 1px solid #E0E0E0; color: #333; padding: 8px 16px; border-radius: 8px; cursor: pointer; &:disabled { cursor: not-allowed; opacity: 0.5; } `;\n_c14 = PageButton;\nconst LoadingContainer = styled.div` display: flex; justify-content: center; align-items: center; height: 300px; font-size: 18px; color: #757575;`;\n\n// --- The Main Page Component ---\n_c15 = LoadingContainer;\nconst SimulationPage = () => {\n  _s();\n  var _currentItem$parent;\n  const {\n    fileId\n  } = useParams();\n  const [simulationData, setSimulationData] = useState(null);\n  const [structuredItems, setStructuredItems] = useState([]);\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [isLoading, setLoading] = useState(true);\n  const [showAnswer, setShowAnswer] = useState(false);\n  const [isSingleView, setIsSingleView] = useState(true); // True for single-question, false for full-content\n  const [searchQuery, setSearchQuery] = useState(''); // For real-time search in full view\n  const [showGoToField, setShowGoToField] = useState(false); // Toggle go-to input\n  const [goToInput, setGoToInput] = useState(''); // Value for go-to field\n  const [showAnswersMap, setShowAnswersMap] = useState({}); // Per-question show/hide in full view (key: question_number)\n  // const [showGoTo, setShowGoTo] = useState(false);\n\n  useEffect(() => {\n    setCurrentIndex(0);\n    setShowAnswersMap({});\n    setShowAnswer(false);\n  }, [isSingleView]);\n  useEffect(() => {\n    if (!fileId) return;\n    async function getSimulationData() {\n      var _data$aiParsedData, _data$aiParsedData$re;\n      setLoading(true);\n      const {\n        data,\n        error\n      } = await supabase.from('files').select('filename, ai-parsed-data').eq('id', fileId).single();\n      if (error) {\n        console.error(\"Error fetching file:\", error);\n      } else if (data && (_data$aiParsedData = data['ai-parsed-data']) !== null && _data$aiParsedData !== void 0 && (_data$aiParsedData$re = _data$aiParsedData.result) !== null && _data$aiParsedData$re !== void 0 && _data$aiParsedData$re.topics) {\n        const topics = data['ai-parsed-data'].result.topics;\n        setSimulationData({\n          fileName: data.filename,\n          topics: topics\n        });\n        const newStructuredItems = [];\n        let qNum = 1;\n        Object.values(topics).forEach(topic => {\n          (topic.questions || []).forEach(q => {\n            newStructuredItems.push({\n              type: 'question',\n              content: {\n                ...q,\n                question_number: q.question_number || (qNum++).toString()\n              },\n              parent: {\n                topic: topic.topic_name,\n                case_study: topic.case_study\n              }\n            });\n          });\n        });\n        setStructuredItems(newStructuredItems);\n        const flatItems = flattenItems((simulationData === null || simulationData === void 0 ? void 0 : simulationData.topics) || {});\n      }\n      setLoading(false);\n    }\n    getSimulationData();\n  }, [fileId]);\n  useEffect(() => {\n    setShowAnswer(false);\n  }, [currentIndex]);\n\n  // Helper to flatten items for full view (matches Flutter's _flattenItems)\n  const flattenItems = topics => {\n    const flatList = [];\n    Object.entries(topics).forEach(([topicKey, topic]) => {\n      if (topic.topic_name) {\n        flatList.push({\n          type: 'topic',\n          content: {\n            title: topic.topic_name,\n            caseStudyCount: topic.case_study ? 1 : 0\n          }\n        });\n      }\n      if (topic.case_study) {\n        var _topic$questions2;\n        flatList.push({\n          type: 'case_study',\n          content: {\n            title: topicKey,\n            description: topic.case_study,\n            questionsCount: ((_topic$questions2 = topic.questions) === null || _topic$questions2 === void 0 ? void 0 : _topic$questions2.length) || 0\n          }\n        });\n      }\n      (topic.questions || []).forEach((q, qIndex) => {\n        flatList.push({\n          type: 'question',\n          content: {\n            ...q,\n            question_number: q.question_number || (qIndex + 1).toString()\n          }\n        });\n      });\n    });\n    return flatList;\n  };\n  const handleNext = () => setCurrentIndex(prev => Math.min(prev + 1, structuredItems.length - 1));\n  const handlePrev = () => setCurrentIndex(prev => Math.max(prev - 1, 0));\n  const currentItem = structuredItems[currentIndex];\n  if (isLoading) return /*#__PURE__*/_jsxDEV(LoadingContainer, {\n    children: \"Loading Simulation...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 27\n  }, this);\n  if (!currentItem) return /*#__PURE__*/_jsxDEV(LoadingContainer, {\n    children: \"Could not load questions for this file.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 165,\n    columnNumber: 30\n  }, this);\n  return /*#__PURE__*/_jsxDEV(PageContainer, {\n    children: [/*#__PURE__*/_jsxDEV(HeaderContainer, {\n      children: /*#__PURE__*/_jsxDEV(FileName, {\n        children: simulationData === null || simulationData === void 0 ? void 0 : simulationData.fileName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(ContentContainer, {\n      children: [((_currentItem$parent = currentItem.parent) === null || _currentItem$parent === void 0 ? void 0 : _currentItem$parent.case_study) && /*#__PURE__*/_jsxDEV(CaseStudyContainer, {\n        children: /*#__PURE__*/_jsxDEV(HtmlRenderer, {\n          htmlString: currentItem.parent.case_study\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(QuestionCardContainer, {\n        children: [/*#__PURE__*/_jsxDEV(QuestionHeader, {\n          children: [/*#__PURE__*/_jsxDEV(QuestionNumber, {\n            children: [\"Q: \", currentItem.content.question_number]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(HtmlRenderer, {\n            htmlString: currentItem.content.question\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: \"Options\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(OptionsList, {\n          children: currentItem.content.options.map((opt, index) => {\n            const optionLetter = String.fromCharCode(65 + index);\n            const isCorrect = showAnswer && currentItem.content.answer.includes(optionLetter);\n            return /*#__PURE__*/_jsxDEV(OptionItem, {\n              $isCorrect: isCorrect,\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: [optionLetter, \". \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(HtmlRenderer, {\n                htmlString: opt.replace(/^[A-Z][.)]\\s*/, '')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 3\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 21\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(ActionButtons, {\n          children: /*#__PURE__*/_jsxDEV(PrimaryButton, {\n            onClick: () => setShowAnswer(!showAnswer),\n            children: showAnswer ? 'Hide Answer' : 'Show Answer'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 15\n        }, this), showAnswer && /*#__PURE__*/_jsxDEV(ExplanationSection, {\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            children: \"Explanation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(HtmlRenderer, {\n            htmlString: currentItem.content.explanation\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(PaginationContainer, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Question \", currentItem.content.question_number, \" of \", structuredItems.length]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '8px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(PageButton, {\n          onClick: handlePrev,\n          disabled: currentIndex === 0,\n          children: \"Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(PageButton, {\n          onClick: handleNext,\n          disabled: currentIndex === structuredItems.length - 1,\n          children: \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 168,\n    columnNumber: 9\n  }, this);\n};\n_s(SimulationPage, \"8rHhPRcERqs5sR7pME3YcyhUfMw=\", false, function () {\n  return [useParams];\n});\n_c16 = SimulationPage;\nexport default SimulationPage;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16;\n$RefreshReg$(_c, \"PageContainer\");\n$RefreshReg$(_c2, \"HeaderContainer\");\n$RefreshReg$(_c3, \"FileName\");\n$RefreshReg$(_c4, \"ContentContainer\");\n$RefreshReg$(_c5, \"CaseStudyContainer\");\n$RefreshReg$(_c6, \"QuestionCardContainer\");\n$RefreshReg$(_c7, \"QuestionHeader\");\n$RefreshReg$(_c8, \"QuestionNumber\");\n$RefreshReg$(_c9, \"Label\");\n$RefreshReg$(_c0, \"OptionsList\");\n$RefreshReg$(_c1, \"OptionItem\");\n$RefreshReg$(_c10, \"ActionButtons\");\n$RefreshReg$(_c11, \"PrimaryButton\");\n$RefreshReg$(_c12, \"ExplanationSection\");\n$RefreshReg$(_c13, \"PaginationContainer\");\n$RefreshReg$(_c14, \"PageButton\");\n$RefreshReg$(_c15, \"LoadingContainer\");\n$RefreshReg$(_c16, \"SimulationPage\");","map":{"version":3,"names":["React","useState","useEffect","styled","useParams","supabase","HtmlRenderer","jsxDEV","_jsxDEV","flattenItems","topics","flatList","Object","entries","forEach","topicKey","topic","topic_name","push","type","content","title","caseStudyCount","case_study","_topic$questions","description","questionsCount","questions","length","q","qIndex","question_number","toString","PageContainer","div","_c","HeaderContainer","_c2","FileName","h2","_c3","ContentContainer","_c4","CaseStudyContainer","_c5","QuestionCardContainer","_c6","QuestionHeader","_c7","QuestionNumber","_c8","Label","p","_c9","OptionsList","_c0","OptionItem","$isCorrect","_c1","ActionButtons","_c10","PrimaryButton","button","_c11","ExplanationSection","_c12","PaginationContainer","_c13","PageButton","_c14","LoadingContainer","_c15","SimulationPage","_s","_currentItem$parent","fileId","simulationData","setSimulationData","structuredItems","setStructuredItems","currentIndex","setCurrentIndex","isLoading","setLoading","showAnswer","setShowAnswer","isSingleView","setIsSingleView","searchQuery","setSearchQuery","showGoToField","setShowGoToField","goToInput","setGoToInput","showAnswersMap","setShowAnswersMap","getSimulationData","_data$aiParsedData","_data$aiParsedData$re","data","error","from","select","eq","single","console","result","fileName","filename","newStructuredItems","qNum","values","parent","flatItems","_topic$questions2","handleNext","prev","Math","min","handlePrev","max","currentItem","children","_jsxFileName","lineNumber","columnNumber","htmlString","question","options","map","opt","index","optionLetter","String","fromCharCode","isCorrect","answer","includes","replace","onClick","explanation","style","display","gap","disabled","_c16","$RefreshReg$"],"sources":["/Users/megamac/Dev/GitHub/projects/certempire-react/src/pages/SimulationPage.tsx"],"sourcesContent":["  // src/pages/SimulationPage.tsx\n  import React, { useState, useEffect } from 'react';\n  import styled from 'styled-components';\n  import { useParams } from 'react-router-dom';\n  import { supabase } from '../supabaseClient';\n  import HtmlRenderer from '../components/utils/HtmlRenderer'; // 1. Import the new component\n\n\n  // MAKING CHANGES NOW.\n\n\n  // --- SVG Icons ---\n  //const IconMagnifyingGlass = () => <svg width=\"20\" height=\"20\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159L11.5 12.5L12.5 11.5L10.0158 9.30885C9.42248 9.75587 8.68594 10.0345 7.89932 10.0883L6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5C10 7.50556 9.61334 8.42373 9.00001 9.13098L9.30884 10.0159Z\" fill=\"#757575\"></path></svg>;\n  //const IconFlag = () => <svg width=\"16\" height=\"16\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M4.5 14.5V4.5H12.5L9.5 7L12.5 9.5H4.5ZM3 3.5H14V10.5L10 7.5L14 4.5H4V14.5H3V3.5Z\" fill=\"currentColor\"></path></svg>;\n  //const IconDownload = () => <svg width=\"18\" height=\"18\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M4 6H2V12.5C2 12.7761 2.22386 13 2.5 13H12.5C12.7761 13 13 12.7761 13 12.5V6H11V12H4V6ZM7.5 10L11 5H8V2H7V5H4L7.5 10Z\" fill=\"currentColor\"></path></svg>;\n  //const IconEye = () => <svg width=\"16\" height=\"16\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M7.5 11C4.79322 11 2.49241 9.2993 1.05532 7.50001C2.49241 5.70072 4.79322 4 7.5 4C10.2068 4 12.5076 5.70072 13.9447 7.50001C12.5076 9.2993 10.2068 11 7.5 11ZM7.5 3C4.33776 3 1.68988 5.00373 0.160645 6.88398L0.116041 6.94165C-0.0386803 7.14378 -0.0386803 7.85624 0.116041 8.05837L0.160645 8.11604C1.68988 9.99629 4.33776 12 7.5 12C10.6622 12 13.3101 9.99629 14.8394 8.11604L14.884 8.05837C15.0387 7.85624 15.0387 7.14378 14.884 6.94165L14.8394 6.88398C13.3101 5.00373 10.6622 3 7.5 3ZM7.5 9C6.40237 9 5.50655 8.11289 5.5 7.00001C5.50655 5.88713 6.40237 5.00001 7.5 5.00001C8.59763 5.00001 9.49345 5.88713 9.5 7.00001C9.49345 8.11289 8.59763 9 7.5 9Z\" fill=\"currentColor\"></path></svg>;\n  //const IconEyeSlash = () => <svg width=\"16\" height=\"16\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M1.3415 13.6585L13.6582 1.34176L12.9511 0.634691L0.634433 12.9514L1.3415 13.6585ZM4.39893 9.60107C3.13626 8.87784 2.15372 7.84628 1.05532 7.5C2.49241 5.70072 4.79322 4 7.5 4C8.61439 4 9.66427 4.29891 10.584 4.80878L9.49989 6.00001C9.49561 5.92548 9.24345 5.88713 9.5 7C9.49345 8.11289 8.59763 9 7.5 9C6.81406 9 6.20237 8.68594 5.86902 8.13098L4.39893 9.60107ZM14.8394 6.88398C13.5936 5.25338 11.6622 3 7.5 3C6.59763 3 5.75655 3.20237 5.00001 3.55837L6.50001 5C6.40237 5 5.50655 5.88713 5.5 7C5.50655 7.24345 5.57452 7.46548 5.68988 7.68988L7.584 9.584C8.75655 9.42548 9.49345 8.49345 9.5 7.41594L13.8839 12.8394C14.4934 12.1129 14.8394 11.2434 14.8394 10.5C14.8394 9.99629 13.3101 8.11604 14.884 8.05837C15.0387 7.85624 15.0387 7.14378 14.884 6.94165L14.8394 6.88398Z\" fill=\"currentColor\"></path></svg>;\n\n  // --- Type Definitions ---\n  type Question = { answer: string[]; options: string[]; question: string; explanation: string; question_number: string; };\n  type Topic = { questions: Question[]; case_study?: string; topic_name?: string; };\n  type SimulationData = { fileName: string; topics: Record<string, Topic>; };\n  type SupabaseFile = { 'ai-parsed-data': { result: { topics: Record<string, Topic>; }; }; filename: string; };\n  type StructuredItem = { type: 'question'; content: Question; parent?: { topic?: string; case_study?: string } };\n\n  // --- Helper function ---\n\n  /*\n\n  const getAllQuestions = (topics: Record<string, Topic>): Question[] => {\n    if (!topics) return [];\n    let questions: Question[] = [];\n    Object.values(topics).forEach((topic: Topic) => {\n      if (topic.questions && Array.isArray(topic.questions)) {\n        questions.push(...topic.questions);\n      }\n    });\n    return questions.map((q, index) => ({ ...q, question_number: (index + 1).toString() }));\n  };\n\n  */\n\n  const flattenItems = (topics) => {\n  const flatList = [];\n  Object.entries(topics).forEach(([topicKey, topic]) => {\n    if (topic.topic_name) {\n      flatList.push({ type: 'topic', content: { title: topic.topic_name, caseStudyCount: topic.case_study ? 1 : 0 } });\n    }\n    if (topic.case_study) {\n      flatList.push({ type: 'case_study', content: { title: topicKey, description: topic.case_study, questionsCount: topic.questions?.length || 0 } });\n    }\n    (topic.questions || []).forEach((q, qIndex) => {\n      flatList.push({ type: 'question', content: { ...q, question_number: q.question_number || (qIndex + 1).toString() } });\n    });\n  });\n  return flatList;\n};\n\n  // --- Styled Components (Full Definitions) ---\n  const PageContainer = styled.div` display: flex; flex-direction: column; gap: 16px; `;\n  const HeaderContainer = styled.div` display: flex; flex-direction: column; gap: 16px; `;\n  // const HeaderTopRow = styled.div` display: flex; justify-content: space-between; align-items: center; gap: 16px; flex-wrap: wrap; `;\n  const FileName = styled.h2` color: #2c2c54; font-weight: bold; font-size: 22px; `;\n  // const HeaderActions = styled.div` display: flex; align-items: center; gap: 12px; `;\n  //const SearchInput = styled.div` display: flex; align-items: center; background-color: white; border: 1px solid #E0E0E0; border-radius: 12px; padding: 0 12px; width: 250px; input { border: none; outline: none; padding: 12px 8px; font-size: 14px; flex-grow: 1; } `;\n  // const GoToButton = styled.button` background: none; border: 1px solid #E0E0E0; padding: 8px 12px; border-radius: 12px; cursor: pointer; display: flex; align-items: center; gap: 8px; font-weight: bold; `;\n  // const DownloadButton = styled.button` background-color: #673AB7; color: white; border: none; border-radius: 12px; padding: 10px 16px; font-weight: 500; cursor: pointer; display: flex; align-items: center; gap: 8px; `;\n  // const GoToFieldContainer = styled.div<{ $show: boolean; }>` max-height: ${({ $show }) => $show ? '60px' : '0'}; display: flex; justify-content: center; align-items: center; gap: 8px; padding: ${({ $show }) => $show ? '8px 0' : '0'}; overflow: hidden; transition: all 0.3s ease-in-out; opacity: ${({ $show }) => $show ? '1' : '0'}; `;\n  const ContentContainer = styled.div` background-color: white; border-radius: 12px; border: 1px solid #E0E0E0; `;\n  // const TopicHeader = styled.div` display: flex; align-items: center; gap: 16px; padding: 24px; border-bottom: 1px solid #f0f0f0; font-size: 18px; font-weight: bold; color: #424242;`;\n  const CaseStudyContainer = styled.div` background-color: rgba(239, 234, 254, 0.4); border-bottom: 1px solid rgba(103, 58, 183, 0.2); padding: 26px; `;\n  const QuestionCardContainer = styled.div` padding: 26px; `;\n  const QuestionHeader = styled.div` display: flex; align-items: flex-start; gap: 18px; margin-bottom: 24px; `;\n  const QuestionNumber = styled.div` background-color: rgba(103, 58, 183, 0.12); color: #673AB7; font-weight: bold; font-size: 16px; padding: 12px; border-radius: 10px; `;\n  // const QuestionText = styled.div` font-size: 17px; font-weight: 500; line-height: 1.34; flex: 1; img { max-width: 100%; border-radius: 8px; margin-top: 10px; } `;\n  const Label = styled.p` color: #BDBDBD; font-weight: 600; font-size: 12px; text-transform: uppercase; letter-spacing: 0.8px; margin-bottom: 8px; `;\n  const OptionsList = styled.div` display: flex; flex-direction: column; gap: 6px; padding-left: 76px; @media(max-width: 600px) { padding-left: 0; } `;\n  const OptionItem = styled.div<{ $isCorrect: boolean; }>` border: 1.1px solid ${({ $isCorrect }) => $isCorrect ? '#2E7D32' : '#E0E0E0'}; background-color: ${({ $isCorrect }) => $isCorrect ? '#E8F5E9' : 'transparent'}; border-radius: 8px; padding: 11px 14px; font-size: 15px; line-height: 1.35; img { max-width: 100%; border-radius: 8px; margin-top: 10px; } `;\n  const ActionButtons = styled.div` display: flex; justify-content: flex-end; gap: 8px; margin-top: 26px; `;\n  const PrimaryButton = styled.button` border: none; background-color: #673AB7; color: white; padding: 10px 16px; border-radius: 8px; cursor: pointer; font-weight: 500; `;\n  const ExplanationSection = styled.div` padding-top: 16px; margin-top: 16px; border-top: 1.1px solid #E0E0E0; img { max-width: 100%; border-radius: 8px; margin-top: 10px; } `;\n  const PaginationContainer = styled.div` display: flex; justify-content: space-between; align-items: center; padding: 16px 24px; background-color: white; border: 1px solid #E0E0E0; border-radius: 12px; `;\n  const PageButton = styled.button` background: none; border: 1px solid #E0E0E0; color: #333; padding: 8px 16px; border-radius: 8px; cursor: pointer; &:disabled { cursor: not-allowed; opacity: 0.5; } `;\n  const LoadingContainer = styled.div` display: flex; justify-content: center; align-items: center; height: 300px; font-size: 18px; color: #757575;`;\n\n  // --- The Main Page Component ---\n  const SimulationPage = () => {\n    const { fileId } = useParams<{ fileId: string }>();\n    const [simulationData, setSimulationData] = useState<SimulationData | null>(null);\n    const [structuredItems, setStructuredItems] = useState<StructuredItem[]>([]);\n    const [currentIndex, setCurrentIndex] = useState(0);\n    const [isLoading, setLoading] = useState(true);\n    const [showAnswer, setShowAnswer] = useState(false);\n    const [isSingleView, setIsSingleView] = useState(true); // True for single-question, false for full-content\nconst [searchQuery, setSearchQuery] = useState(''); // For real-time search in full view\nconst [showGoToField, setShowGoToField] = useState(false); // Toggle go-to input\nconst [goToInput, setGoToInput] = useState(''); // Value for go-to field\nconst [showAnswersMap, setShowAnswersMap] = useState<Record<string, boolean>>({}); // Per-question show/hide in full view (key: question_number)\n  // const [showGoTo, setShowGoTo] = useState(false);\n\nuseEffect(() => {\n  setCurrentIndex(0);\n  setShowAnswersMap({});\n  setShowAnswer(false);\n}, [isSingleView]);\n\n\n    useEffect(() => {\n      if (!fileId) return;\n      async function getSimulationData() {\n        setLoading(true);\n        const { data, error } = await supabase.from('files').select('filename, ai-parsed-data').eq('id', fileId).single<SupabaseFile>();\n        if (error) {\n          console.error(\"Error fetching file:\", error);\n        } else if (data && data['ai-parsed-data']?.result?.topics) {\n          const topics = data['ai-parsed-data'].result.topics;\n          setSimulationData({ fileName: data.filename, topics: topics });\n          const newStructuredItems: StructuredItem[] = [];\n          let qNum = 1;\n          Object.values(topics).forEach((topic: Topic) => {\n            (topic.questions || []).forEach((q: Question) => {\n              newStructuredItems.push({\n                type: 'question',\n                content: { ...q, question_number: q.question_number || (qNum++).toString() },\n                parent: { topic: topic.topic_name, case_study: topic.case_study }\n              });\n            });\n          });\n          setStructuredItems(newStructuredItems);\n\n          const flatItems = flattenItems(simulationData?.topics || {});\n        }\n        setLoading(false);\n      }\n      getSimulationData();\n    }, [fileId]);\n\n    useEffect(() => {\n      setShowAnswer(false);\n    }, [currentIndex]);\n\n    // Helper to flatten items for full view (matches Flutter's _flattenItems)\nconst flattenItems = (topics: Record<string, Topic>): any[] => {\n  const flatList: any[] = [];\n  Object.entries(topics).forEach(([topicKey, topic]) => {\n    if (topic.topic_name) {\n      flatList.push({ type: 'topic', content: { title: topic.topic_name, caseStudyCount: topic.case_study ? 1 : 0 } });\n    }\n    if (topic.case_study) {\n      flatList.push({ type: 'case_study', content: { title: topicKey, description: topic.case_study, questionsCount: topic.questions?.length || 0 } });\n    }\n    (topic.questions || []).forEach((q, qIndex) => {\n      flatList.push({ type: 'question', content: { ...q, question_number: q.question_number || (qIndex + 1).toString() } });\n    });\n  });\n  return flatList;\n};\n    \n    const handleNext = () => setCurrentIndex(prev => Math.min(prev + 1, structuredItems.length - 1));\n    const handlePrev = () => setCurrentIndex(prev => Math.max(prev - 1, 0));\n\n    const currentItem = structuredItems[currentIndex];\n\n    if (isLoading) return <LoadingContainer>Loading Simulation...</LoadingContainer>;\n    if (!currentItem) return <LoadingContainer>Could not load questions for this file.</LoadingContainer>;\n\n    return (\n        <PageContainer>\n          <HeaderContainer>\n            <FileName>{simulationData?.fileName}</FileName>\n          </HeaderContainer>\n    \n          <ContentContainer>\n            {/* 2. Using the HtmlRenderer for the Case Study */}\n            {currentItem.parent?.case_study && \n              <CaseStudyContainer>\n                <HtmlRenderer htmlString={currentItem.parent.case_study} />\n              </CaseStudyContainer>\n            }\n            \n            <QuestionCardContainer>\n              <QuestionHeader>\n                <QuestionNumber>Q: {currentItem.content.question_number}</QuestionNumber>\n                {/* 3. Using the HtmlRenderer for the Question Text */}\n                <HtmlRenderer htmlString={currentItem.content.question} />\n              </QuestionHeader>\n              <Label>Options</Label>\n              <OptionsList>\n                {currentItem.content.options.map((opt: string, index: number) => {\n                  const optionLetter = String.fromCharCode(65 + index);\n                  const isCorrect = showAnswer && currentItem.content.answer.includes(optionLetter);\n                  return (\n                    <OptionItem key={index} $isCorrect={isCorrect}>\n                      <b>{optionLetter}. </b> \n                      {/* 4. Using the HtmlRenderer for each Option */}\n  <HtmlRenderer htmlString={opt.replace(/^[A-Z][.)]\\s*/, '')} />\n                    </OptionItem>\n                  );\n                })}\n              </OptionsList>\n              <ActionButtons>\n                <PrimaryButton onClick={() => setShowAnswer(!showAnswer)}>\n                  {showAnswer ? 'Hide Answer' : 'Show Answer'}\n                </PrimaryButton>\n              </ActionButtons>\n              {showAnswer && (\n                <ExplanationSection>\n                  <Label>Explanation</Label>\n                  {/* 5. Using the HtmlRenderer for the Explanation */}\n                  <HtmlRenderer htmlString={currentItem.content.explanation} />\n                </ExplanationSection>\n              )}\n            </QuestionCardContainer>\n          </ContentContainer>\n          \n          <PaginationContainer>\n            <span>Question {currentItem.content.question_number} of {structuredItems.length}</span>\n            <div style={{ display: 'flex', gap: '8px' }}>\n              <PageButton onClick={handlePrev} disabled={currentIndex === 0}>Back</PageButton>\n              <PageButton onClick={handleNext} disabled={currentIndex === structuredItems.length - 1}>Next</PageButton>\n            </div>\n          </PaginationContainer>\n        </PageContainer>\n      );\n    };\n    \n    export default SimulationPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
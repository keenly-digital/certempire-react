{"ast":null,"code":"var _jsxFileName = \"/Users/megamac/Dev/GitHub/projects/certempire-react/src/pages/SimulationPage.tsx\",\n  _s = $RefreshSig$();\n// src/pages/SimulationPage.tsx\nimport React, { useState, useEffect, useMemo } from 'react';\nimport styled from 'styled-components';\nimport { useParams } from 'react-router-dom';\nimport { supabase } from '../supabaseClient';\nimport HtmlRenderer from '../components/utils/HtmlRenderer';\n\n// --- Icon Components ---\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst IconSearch = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n  width: \"20\",\n  height: \"20\",\n  viewBox: \"0 0 15 15\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159L11.5 12.5L12.5 11.5L10.0158 9.30885C9.42248 9.75587 8.68594 10.0345 7.89932 10.0883L6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5C10 7.50556 9.61334 8.42373 9.00001 9.13098L9.30884 10.0159Z\",\n    fill: \"currentColor\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 9,\n    columnNumber: 121\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 9,\n  columnNumber: 26\n}, this);\n_c = IconSearch;\nconst IconFlag = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n  width: \"16\",\n  height: \"16\",\n  viewBox: \"0 0 15 15\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M4.5 14.5V4.5H12.5L9.5 7L12.5 9.5H4.5ZM3 3.5H14V10.5L10 7.5L14 4.5H4V14.5H3V3.5Z\",\n    fill: \"currentColor\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 119\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 10,\n  columnNumber: 24\n}, this);\n_c2 = IconFlag;\nconst IconDownload = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n  width: \"18\",\n  height: \"18\",\n  viewBox: \"0 0 15 15\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M4 6H2V12.5C2 12.7761 2.22386 13 2.5 13H12.5C12.7761 13 13 12.7761 13 12.5V6H11V12H4V6ZM7.5 10L11 5H8V2H7V5H4L7.5 10Z\",\n    fill: \"currentColor\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 11,\n    columnNumber: 123\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 11,\n  columnNumber: 28\n}, this);\n_c3 = IconDownload;\nconst IconEye = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n  width: \"16\",\n  height: \"16\",\n  viewBox: \"0 0 15 15\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M7.5 11C4.79322 11 2.49241 9.2993 1.05532 7.50001C2.49241 5.70072 4.79322 4 7.5 4C10.2068 4 12.5076 5.70072 13.9447 7.50001C12.5076 9.2993 10.2068 11 7.5 11ZM7.5 3C4.33776 3 1.68988 5.00373 0.160645 6.88398L0.116041 6.94165C-0.0386803 7.14378 -0.0386803 7.85624 0.116041 8.05837L0.160645 8.11604C1.68988 9.99629 4.33776 12 7.5 12C10.6622 12 13.3101 9.99629 14.8394 8.11604L14.884 8.05837C15.0387 7.85624 15.0387 7.14378 14.884 6.94165L14.8394 6.88398C13.3101 5.00373 10.6622 3 7.5 3ZM7.5 9C6.40237 9 5.50655 8.11289 5.5 7.00001C5.50655 5.88713 6.40237 5.00001 7.5 5.00001C8.59763 5.00001 9.49345 5.88713 9.5 7.00001C9.49345 8.11289 8.59763 9 7.5 9Z\",\n    fill: \"currentColor\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 12,\n    columnNumber: 118\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 12,\n  columnNumber: 23\n}, this);\n_c4 = IconEye;\nconst IconEyeSlash = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n  width: \"16\",\n  height: \"16\",\n  viewBox: \"0 0 15 15\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M1.3415 13.6585L13.6582 1.34176L12.9511 0.634691L0.634433 12.9514L1.3415 13.6585ZM4.39893 9.60107C3.13626 8.87784 2.15372 7.84628 1.05532 7.5C2.49241 5.70072 4.79322 4 7.5 4C8.61439 4 9.66427 4.29891 10.584 4.80878L9.49989 6.00001C9.49561 5.92548 9.24345 5.88713 9.5 7C9.49345 8.11289 8.59763 9 7.5 9C6.81406 9 6.20237 8.68594 5.86902 8.13098L4.39893 9.60107ZM14.8394 6.88398C13.5936 5.25338 11.6622 3 7.5 3C6.59763 3 5.75655 3.20237 5.00001 3.55837L6.50001 5C6.40237 5 5.50655 5.88713 5.5 7C5.50655 7.24345 5.57452 7.46548 5.68988 7.68988L7.584 9.584C8.75655 9.42548 9.49345 8.49345 9.5 7.41594L13.8839 12.8394C14.4934 12.1129 14.8394 11.2434 14.8394 10.5C14.8394 9.99629 13.3101 8.11604 14.884 8.05837C15.0387 7.85624 15.0387 7.14378 14.884 6.94165L14.8394 6.88398Z\",\n    fill: \"currentColor\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 123\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 13,\n  columnNumber: 28\n}, this);\n\n// --- Type Definitions (Untouched) ---\n_c5 = IconEyeSlash;\n// --- Styled Components (UI/UX Updated) ---\nconst PageContainer = styled.div` display: flex; flex-direction: column; gap: 24px; `;\n_c6 = PageContainer;\nconst HeaderContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n`;\n_c7 = HeaderContainer;\nconst HeaderTopRow = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 16px;\n  flex-wrap: wrap;\n`;\n_c8 = HeaderTopRow;\nconst FileName = styled.h2`\n  color: ${({\n  theme\n}) => theme.colors.primary};\n  font-weight: 700;\n  font-size: 24px;\n  flex-grow: 1;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n_c9 = FileName;\nconst HeaderActions = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  flex-shrink: 0;\n`;\n_c0 = HeaderActions;\nconst SearchInput = styled.div`\n  display: flex;\n  align-items: center;\n  background-color: ${({\n  theme\n}) => theme.colors.surface};\n  border: 1px solid ${({\n  theme\n}) => theme.colors.lightGrey};\n  border-radius: 12px;\n  padding: 0 12px;\n  width: 250px;\n  color: ${({\n  theme\n}) => theme.colors.textSecondary};\n\n  input {\n    border: none;\n    outline: none;\n    padding: 12px 8px;\n    font-size: 14px;\n    flex-grow: 1;\n    background: transparent;\n    color: ${({\n  theme\n}) => theme.colors.textPrimary};\n  }\n\n  @media (max-width: 650px) {\n    width: 100%;\n    order: 3;\n  }\n`;\n_c1 = SearchInput;\nconst ActionButton = styled.button`\n  background: ${({\n  theme\n}) => theme.colors.surface};\n  border: 1px solid ${({\n  theme\n}) => theme.colors.lightGrey};\n  padding: 8px 12px;\n  border-radius: 12px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-weight: 600;\n  color: ${({\n  theme\n}) => theme.colors.textSecondary};\n  transition: all 0.2s ease-in-out;\n\n  &:hover {\n    border-color: ${({\n  theme\n}) => theme.colors.primary};\n    color: ${({\n  theme\n}) => theme.colors.primary};\n  }\n`;\n_c10 = ActionButton;\nconst DownloadButton = styled(ActionButton)`\n  background-color: ${({\n  theme\n}) => theme.colors.primary};\n  color: ${({\n  theme\n}) => theme.colors.textOnPrimary};\n`;\n_c11 = DownloadButton;\nconst GoToFieldContainer = styled.div`\n  max-height: ${({\n  $show\n}) => $show ? '60px' : '0'};\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 8px;\n  padding: ${({\n  $show\n}) => $show ? '8px 0' : '0'};\n  overflow: hidden;\n  transition: all 0.3s ease-in-out;\n  opacity: ${({\n  $show\n}) => $show ? '1' : '0'};\n\n  input {\n    width: 100px;\n    text-align: center;\n    padding: 8px;\n    border-radius: 8px;\n    border: 1px solid ${({\n  theme\n}) => theme.colors.lightGrey};\n    &:focus {\n      outline: none;\n      border-color: ${({\n  theme\n}) => theme.colors.primary};\n    }\n  }\n`;\n_c12 = GoToFieldContainer;\nconst ContentContainer = styled.div`\n  background-color: ${({\n  theme\n}) => theme.colors.surface};\n  border-radius: 18px;\n  border: 1px solid ${({\n  theme\n}) => theme.colors.lightGrey};\n  box-shadow: ${({\n  theme\n}) => theme.shadows.card};\n`;\n_c13 = ContentContainer;\nconst CaseStudyContainer = styled.div`\n  background-color: rgba(45, 22, 132, 0.05);\n  border-bottom: 1px solid rgba(45, 22, 132, 0.1);\n  padding: 26px;\n  border-radius: 18px 18px 0 0;\n`;\n_c14 = CaseStudyContainer;\nconst QuestionCardContainer = styled.div`\n  padding: 26px;\n  @media (max-width: 600px) {\n    padding: 16px;\n  }\n`;\n_c15 = QuestionCardContainer;\nconst QuestionHeader = styled.div`\n  display: flex;\n  align-items: flex-start;\n  gap: 18px;\n  margin-bottom: 24px;\n  @media (max-width: 600px) {\n    flex-direction: column;\n    gap: 16px;\n  }\n`;\n_c16 = QuestionHeader;\nconst QuestionNumber = styled.div`\n  background-color: rgba(45, 22, 132, 0.12);\n  color: ${({\n  theme\n}) => theme.colors.primary};\n  font-weight: 700;\n  font-size: 16px;\n  padding: 12px;\n  border-radius: 10px;\n  flex-shrink: 0;\n`;\n_c17 = QuestionNumber;\nconst Label = styled.p`\n  color: ${({\n  theme\n}) => theme.colors.textSecondary};\n  font-weight: 600;\n  font-size: 12px;\n  text-transform: uppercase;\n  letter-spacing: 0.8px;\n  margin-bottom: 8px;\n`;\n_c18 = Label;\nconst OptionsList = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  padding-left: 76px;\n  @media (max-width: 600px) {\n    padding-left: 0;\n  }\n`;\n_c19 = OptionsList;\nconst OptionItem = styled.div`\n  border: 1.1px solid ${({\n  theme,\n  $isCorrect\n}) => $isCorrect ? theme.colors.success : theme.colors.lightGrey};\n  background-color: ${({\n  theme,\n  $isCorrect\n}) => $isCorrect ? 'rgba(76, 175, 80, 0.1)' : 'transparent'};\n  border-radius: 8px;\n  padding: 11px 14px;\n  font-size: 15px;\n  line-height: 1.5;\n  transition: all 0.2s ease-in-out;\n\n  b {\n    font-weight: 600;\n  }\n`;\n_c20 = OptionItem;\nconst ActionButtons = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  gap: 8px;\n  margin-top: 26px;\n`;\n_c21 = ActionButtons;\nconst ShowAnswerButton = styled(ActionButton)`\n  background-color: ${({\n  theme\n}) => theme.colors.primary};\n  color: ${({\n  theme\n}) => theme.colors.textOnPrimary};\n  &:hover {\n    background-color: ${({\n  theme\n}) => theme.colors.primary};\n    color: ${({\n  theme\n}) => theme.colors.textOnPrimary};\n  }\n`;\n_c22 = ShowAnswerButton;\nconst ExplanationSection = styled.div`\n  padding-top: 24px;\n  margin-top: 24px;\n  border-top: 1.1px solid ${({\n  theme\n}) => theme.colors.lightGrey};\n`;\n_c23 = ExplanationSection;\nconst PaginationContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 24px;\n  background-color: ${({\n  theme\n}) => theme.colors.surface};\n  border: 1px solid ${({\n  theme\n}) => theme.colors.lightGrey};\n  border-radius: 12px;\n  box-shadow: ${({\n  theme\n}) => theme.shadows.card};\n`;\n_c24 = PaginationContainer;\nconst PageButton = styled.button`\n  background: none;\n  border: 1px solid ${({\n  theme\n}) => theme.colors.lightGrey};\n  color: ${({\n  theme\n}) => theme.colors.textSecondary};\n  padding: 8px 16px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  \n  &:hover:not(:disabled) {\n    border-color: ${({\n  theme\n}) => theme.colors.primary};\n    color: ${({\n  theme\n}) => theme.colors.primary};\n  }\n\n  &:disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n  }\n`;\n_c25 = PageButton;\nconst LoadingContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 300px;\n  font-size: 18px;\n  color: ${({\n  theme\n}) => theme.colors.textSecondary};\n`;\n\n// --- The Main Page Component ---\n_c26 = LoadingContainer;\nconst SimulationPage = () => {\n  _s();\n  var _currentItem$parent;\n  const {\n    fileId\n  } = useParams();\n\n  // --- Existing State (Business Logic - Untouched) ---\n  const [simulationData, setSimulationData] = useState(null);\n  const [structuredItems, setStructuredItems] = useState([]);\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [isLoading, setLoading] = useState(true);\n\n  // --- New State for UI Control ---\n  const [showAnswer, setShowAnswer] = useState(false);\n  const [showGoTo, setShowGoTo] = useState(false);\n  const [goToValue, setGoToValue] = useState('');\n  const [searchQuery, setSearchQuery] = useState('');\n\n  // --- Data Fetching (Untouched) ---\n  useEffect(() => {\n    if (!fileId) return;\n    async function getSimulationData() {\n      var _data$aiParsedData, _data$aiParsedData$re;\n      setLoading(true);\n      const {\n        data,\n        error\n      } = await supabase.from('files').select('filename, ai-parsed-data').eq('id', fileId).single();\n      if (error) {\n        console.error(\"Error fetching file:\", error);\n      } else if (data && (_data$aiParsedData = data['ai-parsed-data']) !== null && _data$aiParsedData !== void 0 && (_data$aiParsedData$re = _data$aiParsedData.result) !== null && _data$aiParsedData$re !== void 0 && _data$aiParsedData$re.topics) {\n        const topics = data['ai-parsed-data'].result.topics;\n        setSimulationData({\n          fileName: data.filename,\n          topics: topics\n        });\n        const newStructuredItems = [];\n        let qNum = 1;\n        Object.values(topics).forEach(topic => {\n          (topic.questions || []).forEach(q => {\n            newStructuredItems.push({\n              type: 'question',\n              content: {\n                ...q,\n                question_number: q.question_number || (qNum++).toString(),\n                id: q.id || `q-${qNum}`\n              },\n              parent: {\n                topic: topic.topic_name,\n                case_study: topic.case_study\n              }\n            });\n          });\n        });\n        setStructuredItems(newStructuredItems);\n      }\n      setLoading(false);\n    }\n    getSimulationData();\n  }, [fileId]);\n\n  // --- UI Logic ---\n  useEffect(() => {\n    setShowAnswer(false);\n  }, [currentIndex]);\n  const handleNext = () => setCurrentIndex(prev => Math.min(prev + 1, filteredItems.length - 1));\n  const handlePrev = () => setCurrentIndex(prev => Math.max(prev - 1, 0));\n  const handleGoTo = () => {\n    const num = parseInt(goToValue, 10);\n    if (!isNaN(num) && num > 0 && num <= structuredItems.length) {\n      const itemIndex = structuredItems.findIndex(item => parseInt(item.content.question_number, 10) === num);\n      if (itemIndex !== -1) {\n        setCurrentIndex(itemIndex);\n      }\n    }\n    setGoToValue('');\n    setShowGoTo(false);\n  };\n  const filteredItems = useMemo(() => {\n    if (!searchQuery) return structuredItems;\n    return structuredItems.filter(item => item.type === 'question' && item.content.question.toLowerCase().includes(searchQuery.toLowerCase()));\n  }, [searchQuery, structuredItems]);\n  const currentItem = filteredItems[currentIndex];\n  if (isLoading) return /*#__PURE__*/_jsxDEV(LoadingContainer, {\n    children: \"Loading Simulation...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 342,\n    columnNumber: 25\n  }, this);\n  if (!structuredItems.length) return /*#__PURE__*/_jsxDEV(LoadingContainer, {\n    children: \"Could not load questions for this file.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 343,\n    columnNumber: 39\n  }, this);\n  return /*#__PURE__*/_jsxDEV(PageContainer, {\n    children: [/*#__PURE__*/_jsxDEV(HeaderContainer, {\n      children: [/*#__PURE__*/_jsxDEV(HeaderTopRow, {\n        children: [/*#__PURE__*/_jsxDEV(FileName, {\n          title: simulationData === null || simulationData === void 0 ? void 0 : simulationData.fileName,\n          children: simulationData === null || simulationData === void 0 ? void 0 : simulationData.fileName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(HeaderActions, {\n          children: [/*#__PURE__*/_jsxDEV(SearchInput, {\n            children: [/*#__PURE__*/_jsxDEV(IconSearch, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Search in this file...\",\n              value: searchQuery,\n              onChange: e => {\n                setSearchQuery(e.target.value);\n                setCurrentIndex(0); // Reset index on new search\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n            onClick: () => setShowGoTo(!showGoTo),\n            children: \"Go To\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(DownloadButton, {\n            children: /*#__PURE__*/_jsxDEV(IconDownload, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(GoToFieldContainer, {\n        $show: showGoTo,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          placeholder: \"Q #\",\n          value: goToValue,\n          onChange: e => setGoToValue(e.target.value),\n          onKeyDown: e => e.key === 'Enter' && handleGoTo()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n          onClick: handleGoTo,\n          children: \"Go\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 7\n    }, this), currentItem ? /*#__PURE__*/_jsxDEV(ContentContainer, {\n      children: [((_currentItem$parent = currentItem.parent) === null || _currentItem$parent === void 0 ? void 0 : _currentItem$parent.case_study) && /*#__PURE__*/_jsxDEV(CaseStudyContainer, {\n        children: /*#__PURE__*/_jsxDEV(HtmlRenderer, {\n          htmlString: currentItem.parent.case_study\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(QuestionCardContainer, {\n        children: [/*#__PURE__*/_jsxDEV(QuestionHeader, {\n          children: [/*#__PURE__*/_jsxDEV(QuestionNumber, {\n            children: [\"Q: \", currentItem.content.question_number]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(HtmlRenderer, {\n            htmlString: currentItem.content.question\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: \"Options\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(OptionsList, {\n          children: currentItem.content.options.map((opt, index) => {\n            const optionLetter = String.fromCharCode(65 + index);\n            const isCorrect = showAnswer && currentItem.content.answer.includes(optionLetter);\n            return /*#__PURE__*/_jsxDEV(OptionItem, {\n              $isCorrect: isCorrect,\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: [optionLetter, \". \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(HtmlRenderer, {\n                htmlString: opt.replace(/^[A-Z][.)]\\s*/, '')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ActionButtons, {\n          children: [/*#__PURE__*/_jsxDEV(ActionButton, {\n            children: [/*#__PURE__*/_jsxDEV(IconFlag, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 17\n            }, this), \" Report\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ShowAnswerButton, {\n            onClick: () => setShowAnswer(!showAnswer),\n            children: [showAnswer ? /*#__PURE__*/_jsxDEV(IconEyeSlash, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 31\n            }, this) : /*#__PURE__*/_jsxDEV(IconEye, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 50\n            }, this), \" \", showAnswer ? 'Hide Answer' : 'Show Answer']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 13\n        }, this), showAnswer && /*#__PURE__*/_jsxDEV(ExplanationSection, {\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            children: \"Explanation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(HtmlRenderer, {\n            htmlString: currentItem.content.explanation\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(LoadingContainer, {\n      children: \"No questions found for your search.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(PaginationContainer, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Question \", currentItem ? currentItem.content.question_number : 0, \" of \", filteredItems.length]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '8px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(PageButton, {\n          onClick: handlePrev,\n          disabled: currentIndex === 0,\n          children: \"Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(PageButton, {\n          onClick: handleNext,\n          disabled: currentIndex >= filteredItems.length - 1,\n          children: \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 346,\n    columnNumber: 5\n  }, this);\n};\n_s(SimulationPage, \"y56ETe+r8fRoaCNTWyERRsX6grc=\", false, function () {\n  return [useParams];\n});\n_c27 = SimulationPage;\nexport default SimulationPage;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19, _c20, _c21, _c22, _c23, _c24, _c25, _c26, _c27;\n$RefreshReg$(_c, \"IconSearch\");\n$RefreshReg$(_c2, \"IconFlag\");\n$RefreshReg$(_c3, \"IconDownload\");\n$RefreshReg$(_c4, \"IconEye\");\n$RefreshReg$(_c5, \"IconEyeSlash\");\n$RefreshReg$(_c6, \"PageContainer\");\n$RefreshReg$(_c7, \"HeaderContainer\");\n$RefreshReg$(_c8, \"HeaderTopRow\");\n$RefreshReg$(_c9, \"FileName\");\n$RefreshReg$(_c0, \"HeaderActions\");\n$RefreshReg$(_c1, \"SearchInput\");\n$RefreshReg$(_c10, \"ActionButton\");\n$RefreshReg$(_c11, \"DownloadButton\");\n$RefreshReg$(_c12, \"GoToFieldContainer\");\n$RefreshReg$(_c13, \"ContentContainer\");\n$RefreshReg$(_c14, \"CaseStudyContainer\");\n$RefreshReg$(_c15, \"QuestionCardContainer\");\n$RefreshReg$(_c16, \"QuestionHeader\");\n$RefreshReg$(_c17, \"QuestionNumber\");\n$RefreshReg$(_c18, \"Label\");\n$RefreshReg$(_c19, \"OptionsList\");\n$RefreshReg$(_c20, \"OptionItem\");\n$RefreshReg$(_c21, \"ActionButtons\");\n$RefreshReg$(_c22, \"ShowAnswerButton\");\n$RefreshReg$(_c23, \"ExplanationSection\");\n$RefreshReg$(_c24, \"PaginationContainer\");\n$RefreshReg$(_c25, \"PageButton\");\n$RefreshReg$(_c26, \"LoadingContainer\");\n$RefreshReg$(_c27, \"SimulationPage\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","styled","useParams","supabase","HtmlRenderer","jsxDEV","_jsxDEV","IconSearch","width","height","viewBox","fill","xmlns","children","d","fileName","_jsxFileName","lineNumber","columnNumber","_c","IconFlag","_c2","IconDownload","_c3","IconEye","_c4","IconEyeSlash","_c5","PageContainer","div","_c6","HeaderContainer","_c7","HeaderTopRow","_c8","FileName","h2","theme","colors","primary","_c9","HeaderActions","_c0","SearchInput","surface","lightGrey","textSecondary","textPrimary","_c1","ActionButton","button","_c10","DownloadButton","textOnPrimary","_c11","GoToFieldContainer","$show","_c12","ContentContainer","shadows","card","_c13","CaseStudyContainer","_c14","QuestionCardContainer","_c15","QuestionHeader","_c16","QuestionNumber","_c17","Label","p","_c18","OptionsList","_c19","OptionItem","$isCorrect","success","_c20","ActionButtons","_c21","ShowAnswerButton","_c22","ExplanationSection","_c23","PaginationContainer","_c24","PageButton","_c25","LoadingContainer","_c26","SimulationPage","_s","_currentItem$parent","fileId","simulationData","setSimulationData","structuredItems","setStructuredItems","currentIndex","setCurrentIndex","isLoading","setLoading","showAnswer","setShowAnswer","showGoTo","setShowGoTo","goToValue","setGoToValue","searchQuery","setSearchQuery","getSimulationData","_data$aiParsedData","_data$aiParsedData$re","data","error","from","select","eq","single","console","result","topics","filename","newStructuredItems","qNum","Object","values","forEach","topic","questions","q","push","type","content","question_number","toString","id","parent","topic_name","case_study","handleNext","prev","Math","min","filteredItems","length","handlePrev","max","handleGoTo","num","parseInt","isNaN","itemIndex","findIndex","item","filter","question","toLowerCase","includes","currentItem","title","placeholder","value","onChange","e","target","onClick","onKeyDown","key","htmlString","options","map","opt","index","optionLetter","String","fromCharCode","isCorrect","answer","replace","explanation","style","display","gap","disabled","_c27","$RefreshReg$"],"sources":["/Users/megamac/Dev/GitHub/projects/certempire-react/src/pages/SimulationPage.tsx"],"sourcesContent":["// src/pages/SimulationPage.tsx\nimport React, { useState, useEffect, useMemo } from 'react';\nimport styled from 'styled-components';\nimport { useParams } from 'react-router-dom';\nimport { supabase } from '../supabaseClient';\nimport HtmlRenderer from '../components/utils/HtmlRenderer';\n\n// --- Icon Components ---\nconst IconSearch = () => <svg width=\"20\" height=\"20\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159L11.5 12.5L12.5 11.5L10.0158 9.30885C9.42248 9.75587 8.68594 10.0345 7.89932 10.0883L6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5C10 7.50556 9.61334 8.42373 9.00001 9.13098L9.30884 10.0159Z\" fill=\"currentColor\"></path></svg>;\nconst IconFlag = () => <svg width=\"16\" height=\"16\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M4.5 14.5V4.5H12.5L9.5 7L12.5 9.5H4.5ZM3 3.5H14V10.5L10 7.5L14 4.5H4V14.5H3V3.5Z\" fill=\"currentColor\"></path></svg>;\nconst IconDownload = () => <svg width=\"18\" height=\"18\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M4 6H2V12.5C2 12.7761 2.22386 13 2.5 13H12.5C12.7761 13 13 12.7761 13 12.5V6H11V12H4V6ZM7.5 10L11 5H8V2H7V5H4L7.5 10Z\" fill=\"currentColor\"></path></svg>;\nconst IconEye = () => <svg width=\"16\" height=\"16\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M7.5 11C4.79322 11 2.49241 9.2993 1.05532 7.50001C2.49241 5.70072 4.79322 4 7.5 4C10.2068 4 12.5076 5.70072 13.9447 7.50001C12.5076 9.2993 10.2068 11 7.5 11ZM7.5 3C4.33776 3 1.68988 5.00373 0.160645 6.88398L0.116041 6.94165C-0.0386803 7.14378 -0.0386803 7.85624 0.116041 8.05837L0.160645 8.11604C1.68988 9.99629 4.33776 12 7.5 12C10.6622 12 13.3101 9.99629 14.8394 8.11604L14.884 8.05837C15.0387 7.85624 15.0387 7.14378 14.884 6.94165L14.8394 6.88398C13.3101 5.00373 10.6622 3 7.5 3ZM7.5 9C6.40237 9 5.50655 8.11289 5.5 7.00001C5.50655 5.88713 6.40237 5.00001 7.5 5.00001C8.59763 5.00001 9.49345 5.88713 9.5 7.00001C9.49345 8.11289 8.59763 9 7.5 9Z\" fill=\"currentColor\"></path></svg>;\nconst IconEyeSlash = () => <svg width=\"16\" height=\"16\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M1.3415 13.6585L13.6582 1.34176L12.9511 0.634691L0.634433 12.9514L1.3415 13.6585ZM4.39893 9.60107C3.13626 8.87784 2.15372 7.84628 1.05532 7.5C2.49241 5.70072 4.79322 4 7.5 4C8.61439 4 9.66427 4.29891 10.584 4.80878L9.49989 6.00001C9.49561 5.92548 9.24345 5.88713 9.5 7C9.49345 8.11289 8.59763 9 7.5 9C6.81406 9 6.20237 8.68594 5.86902 8.13098L4.39893 9.60107ZM14.8394 6.88398C13.5936 5.25338 11.6622 3 7.5 3C6.59763 3 5.75655 3.20237 5.00001 3.55837L6.50001 5C6.40237 5 5.50655 5.88713 5.5 7C5.50655 7.24345 5.57452 7.46548 5.68988 7.68988L7.584 9.584C8.75655 9.42548 9.49345 8.49345 9.5 7.41594L13.8839 12.8394C14.4934 12.1129 14.8394 11.2434 14.8394 10.5C14.8394 9.99629 13.3101 8.11604 14.884 8.05837C15.0387 7.85624 15.0387 7.14378 14.884 6.94165L14.8394 6.88398Z\" fill=\"currentColor\"></path></svg>;\n\n// --- Type Definitions (Untouched) ---\ntype Question = { id: string; answer: string[]; options: string[]; question: string; explanation: string; question_number: string; };\ntype Topic = { questions: Question[]; case_study?: string; topic_name?: string; };\ntype SimulationData = { fileName: string; topics: Record<string, Topic>; };\ntype SupabaseFile = { 'ai-parsed-data': { result: { topics: Record<string, Topic>; }; }; filename: string; };\ntype StructuredItem = { type: 'question'; content: Question; parent?: { topic?: string; case_study?: string } };\n\n// --- Styled Components (UI/UX Updated) ---\nconst PageContainer = styled.div` display: flex; flex-direction: column; gap: 24px; `;\n\nconst HeaderContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n`;\n\nconst HeaderTopRow = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 16px;\n  flex-wrap: wrap;\n`;\n\nconst FileName = styled.h2`\n  color: ${({ theme }) => theme.colors.primary};\n  font-weight: 700;\n  font-size: 24px;\n  flex-grow: 1;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst HeaderActions = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  flex-shrink: 0;\n`;\n\nconst SearchInput = styled.div`\n  display: flex;\n  align-items: center;\n  background-color: ${({ theme }) => theme.colors.surface};\n  border: 1px solid ${({ theme }) => theme.colors.lightGrey};\n  border-radius: 12px;\n  padding: 0 12px;\n  width: 250px;\n  color: ${({ theme }) => theme.colors.textSecondary};\n\n  input {\n    border: none;\n    outline: none;\n    padding: 12px 8px;\n    font-size: 14px;\n    flex-grow: 1;\n    background: transparent;\n    color: ${({ theme }) => theme.colors.textPrimary};\n  }\n\n  @media (max-width: 650px) {\n    width: 100%;\n    order: 3;\n  }\n`;\n\nconst ActionButton = styled.button`\n  background: ${({ theme }) => theme.colors.surface};\n  border: 1px solid ${({ theme }) => theme.colors.lightGrey};\n  padding: 8px 12px;\n  border-radius: 12px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-weight: 600;\n  color: ${({ theme }) => theme.colors.textSecondary};\n  transition: all 0.2s ease-in-out;\n\n  &:hover {\n    border-color: ${({ theme }) => theme.colors.primary};\n    color: ${({ theme }) => theme.colors.primary};\n  }\n`;\n\nconst DownloadButton = styled(ActionButton)`\n  background-color: ${({ theme }) => theme.colors.primary};\n  color: ${({ theme }) => theme.colors.textOnPrimary};\n`;\n\nconst GoToFieldContainer = styled.div<{ $show: boolean; }>`\n  max-height: ${({ $show }) => $show ? '60px' : '0'};\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 8px;\n  padding: ${({ $show }) => $show ? '8px 0' : '0'};\n  overflow: hidden;\n  transition: all 0.3s ease-in-out;\n  opacity: ${({ $show }) => $show ? '1' : '0'};\n\n  input {\n    width: 100px;\n    text-align: center;\n    padding: 8px;\n    border-radius: 8px;\n    border: 1px solid ${({ theme }) => theme.colors.lightGrey};\n    &:focus {\n      outline: none;\n      border-color: ${({ theme }) => theme.colors.primary};\n    }\n  }\n`;\n\nconst ContentContainer = styled.div`\n  background-color: ${({ theme }) => theme.colors.surface};\n  border-radius: 18px;\n  border: 1px solid ${({ theme }) => theme.colors.lightGrey};\n  box-shadow: ${({ theme }) => theme.shadows.card};\n`;\n\nconst CaseStudyContainer = styled.div`\n  background-color: rgba(45, 22, 132, 0.05);\n  border-bottom: 1px solid rgba(45, 22, 132, 0.1);\n  padding: 26px;\n  border-radius: 18px 18px 0 0;\n`;\n\nconst QuestionCardContainer = styled.div`\n  padding: 26px;\n  @media (max-width: 600px) {\n    padding: 16px;\n  }\n`;\n\nconst QuestionHeader = styled.div`\n  display: flex;\n  align-items: flex-start;\n  gap: 18px;\n  margin-bottom: 24px;\n  @media (max-width: 600px) {\n    flex-direction: column;\n    gap: 16px;\n  }\n`;\n\nconst QuestionNumber = styled.div`\n  background-color: rgba(45, 22, 132, 0.12);\n  color: ${({ theme }) => theme.colors.primary};\n  font-weight: 700;\n  font-size: 16px;\n  padding: 12px;\n  border-radius: 10px;\n  flex-shrink: 0;\n`;\n\nconst Label = styled.p`\n  color: ${({ theme }) => theme.colors.textSecondary};\n  font-weight: 600;\n  font-size: 12px;\n  text-transform: uppercase;\n  letter-spacing: 0.8px;\n  margin-bottom: 8px;\n`;\n\nconst OptionsList = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  padding-left: 76px;\n  @media (max-width: 600px) {\n    padding-left: 0;\n  }\n`;\n\nconst OptionItem = styled.div<{ $isCorrect: boolean; }>`\n  border: 1.1px solid ${({ theme, $isCorrect }) => $isCorrect ? theme.colors.success : theme.colors.lightGrey};\n  background-color: ${({ theme, $isCorrect }) => $isCorrect ? 'rgba(76, 175, 80, 0.1)' : 'transparent'};\n  border-radius: 8px;\n  padding: 11px 14px;\n  font-size: 15px;\n  line-height: 1.5;\n  transition: all 0.2s ease-in-out;\n\n  b {\n    font-weight: 600;\n  }\n`;\n\nconst ActionButtons = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  gap: 8px;\n  margin-top: 26px;\n`;\n\nconst ShowAnswerButton = styled(ActionButton)`\n  background-color: ${({ theme }) => theme.colors.primary};\n  color: ${({ theme }) => theme.colors.textOnPrimary};\n  &:hover {\n    background-color: ${({ theme }) => theme.colors.primary};\n    color: ${({ theme }) => theme.colors.textOnPrimary};\n  }\n`;\n\nconst ExplanationSection = styled.div`\n  padding-top: 24px;\n  margin-top: 24px;\n  border-top: 1.1px solid ${({ theme }) => theme.colors.lightGrey};\n`;\n\nconst PaginationContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 24px;\n  background-color: ${({ theme }) => theme.colors.surface};\n  border: 1px solid ${({ theme }) => theme.colors.lightGrey};\n  border-radius: 12px;\n  box-shadow: ${({ theme }) => theme.shadows.card};\n`;\n\nconst PageButton = styled.button`\n  background: none;\n  border: 1px solid ${({ theme }) => theme.colors.lightGrey};\n  color: ${({ theme }) => theme.colors.textSecondary};\n  padding: 8px 16px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  \n  &:hover:not(:disabled) {\n    border-color: ${({ theme }) => theme.colors.primary};\n    color: ${({ theme }) => theme.colors.primary};\n  }\n\n  &:disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n  }\n`;\n\nconst LoadingContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 300px;\n  font-size: 18px;\n  color: ${({ theme }) => theme.colors.textSecondary};\n`;\n\n// --- The Main Page Component ---\nconst SimulationPage = () => {\n  const { fileId } = useParams<{ fileId: string }>();\n  \n  // --- Existing State (Business Logic - Untouched) ---\n  const [simulationData, setSimulationData] = useState<SimulationData | null>(null);\n  const [structuredItems, setStructuredItems] = useState<StructuredItem[]>([]);\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [isLoading, setLoading] = useState(true);\n  \n  // --- New State for UI Control ---\n  const [showAnswer, setShowAnswer] = useState(false);\n  const [showGoTo, setShowGoTo] = useState(false);\n  const [goToValue, setGoToValue] = useState('');\n  const [searchQuery, setSearchQuery] = useState('');\n\n  // --- Data Fetching (Untouched) ---\n  useEffect(() => {\n    if (!fileId) return;\n    async function getSimulationData() {\n      setLoading(true);\n      const { data, error } = await supabase.from('files').select('filename, ai-parsed-data').eq('id', fileId).single<SupabaseFile>();\n      if (error) {\n        console.error(\"Error fetching file:\", error);\n      } else if (data && data['ai-parsed-data']?.result?.topics) {\n        const topics = data['ai-parsed-data'].result.topics;\n        setSimulationData({ fileName: data.filename, topics: topics });\n        const newStructuredItems: StructuredItem[] = [];\n        let qNum = 1;\n        Object.values(topics).forEach((topic: Topic) => {\n          (topic.questions || []).forEach((q: Question) => {\n            newStructuredItems.push({\n              type: 'question',\n              content: { ...q, question_number: q.question_number || (qNum++).toString(), id: q.id || `q-${qNum}` },\n              parent: { topic: topic.topic_name, case_study: topic.case_study }\n            });\n          });\n        });\n        setStructuredItems(newStructuredItems);\n      }\n      setLoading(false);\n    }\n    getSimulationData();\n  }, [fileId]);\n\n  // --- UI Logic ---\n  useEffect(() => {\n    setShowAnswer(false);\n  }, [currentIndex]);\n\n  const handleNext = () => setCurrentIndex(prev => Math.min(prev + 1, filteredItems.length - 1));\n  const handlePrev = () => setCurrentIndex(prev => Math.max(prev - 1, 0));\n  \n  const handleGoTo = () => {\n    const num = parseInt(goToValue, 10);\n    if (!isNaN(num) && num > 0 && num <= structuredItems.length) {\n        const itemIndex = structuredItems.findIndex(item => parseInt(item.content.question_number, 10) === num);\n        if (itemIndex !== -1) {\n            setCurrentIndex(itemIndex);\n        }\n    }\n    setGoToValue('');\n    setShowGoTo(false);\n  };\n\n  const filteredItems = useMemo(() => {\n    if (!searchQuery) return structuredItems;\n    return structuredItems.filter(item => \n        item.type === 'question' && \n        item.content.question.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n  }, [searchQuery, structuredItems]);\n\n  const currentItem = filteredItems[currentIndex];\n\n  if (isLoading) return <LoadingContainer>Loading Simulation...</LoadingContainer>;\n  if (!structuredItems.length) return <LoadingContainer>Could not load questions for this file.</LoadingContainer>;\n\n  return (\n    <PageContainer>\n      <HeaderContainer>\n        <HeaderTopRow>\n          <FileName title={simulationData?.fileName}>{simulationData?.fileName}</FileName>\n          <HeaderActions>\n            <SearchInput>\n              <IconSearch />\n              <input \n                type=\"text\" \n                placeholder=\"Search in this file...\" \n                value={searchQuery}\n                onChange={(e) => {\n                  setSearchQuery(e.target.value);\n                  setCurrentIndex(0); // Reset index on new search\n                }}\n              />\n            </SearchInput>\n            <ActionButton onClick={() => setShowGoTo(!showGoTo)}>Go To</ActionButton>\n            <DownloadButton>\n              <IconDownload />\n            </DownloadButton>\n          </HeaderActions>\n        </HeaderTopRow>\n        <GoToFieldContainer $show={showGoTo}>\n          <input \n            type=\"number\"\n            placeholder=\"Q #\"\n            value={goToValue}\n            onChange={(e) => setGoToValue(e.target.value)}\n            onKeyDown={(e) => e.key === 'Enter' && handleGoTo()}\n          />\n          <ActionButton onClick={handleGoTo}>Go</ActionButton>\n        </GoToFieldContainer>\n      </HeaderContainer>\n\n      {currentItem ? (\n        <ContentContainer>\n          {currentItem.parent?.case_study && \n            <CaseStudyContainer>\n              <HtmlRenderer htmlString={currentItem.parent.case_study} />\n            </CaseStudyContainer>\n          }\n          \n          <QuestionCardContainer>\n            <QuestionHeader>\n              <QuestionNumber>Q: {currentItem.content.question_number}</QuestionNumber>\n              <HtmlRenderer htmlString={currentItem.content.question} />\n            </QuestionHeader>\n            <Label>Options</Label>\n            <OptionsList>\n              {currentItem.content.options.map((opt: string, index: number) => {\n                const optionLetter = String.fromCharCode(65 + index);\n                const isCorrect = showAnswer && currentItem.content.answer.includes(optionLetter);\n                return (\n                  <OptionItem key={index} $isCorrect={isCorrect}>\n                    <b>{optionLetter}. </b> \n                    <HtmlRenderer htmlString={opt.replace(/^[A-Z][.)]\\s*/, '')} />\n                  </OptionItem>\n                );\n              })}\n            </OptionsList>\n            <ActionButtons>\n              <ActionButton>\n                <IconFlag /> Report\n              </ActionButton>\n              <ShowAnswerButton onClick={() => setShowAnswer(!showAnswer)}>\n                {showAnswer ? <IconEyeSlash /> : <IconEye />} {showAnswer ? 'Hide Answer' : 'Show Answer'}\n              </ShowAnswerButton>\n            </ActionButtons>\n            {showAnswer && (\n              <ExplanationSection>\n                <Label>Explanation</Label>\n                <HtmlRenderer htmlString={currentItem.content.explanation} />\n              </ExplanationSection>\n            )}\n          </QuestionCardContainer>\n        </ContentContainer>\n      ) : (\n        <LoadingContainer>No questions found for your search.</LoadingContainer>\n      )}\n      \n      <PaginationContainer>\n        <span>Question {currentItem ? currentItem.content.question_number : 0} of {filteredItems.length}</span>\n        <div style={{ display: 'flex', gap: '8px' }}>\n          <PageButton onClick={handlePrev} disabled={currentIndex === 0}>Back</PageButton>\n          <PageButton onClick={handleNext} disabled={currentIndex >= filteredItems.length - 1}>Next</PageButton>\n        </div>\n      </PaginationContainer>\n    </PageContainer>\n  );\n};\n  \nexport default SimulationPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"/Users/megamac/Dev/GitHub/projects/certempire-react/src/pages/DownloadsPage.tsx\",\n  _s = $RefreshSig$();\n// src/pages/DownloadsPage.tsx\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Link } from 'react-router-dom';\nimport { useUser } from '../context/UserContext';\nimport { supabase } from '../supabaseClient';\n\n// --- (FIX 1) Define a clear type for a Download object ---\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// --- Helper for UI ---\nconst formatDate = dateString => {\n  if (!dateString) return 'Never';\n  const date = new Date(dateString.replace(' ', 'T'));\n  if (isNaN(date.getTime())) return 'Never';\n  return date.toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  });\n};\n\n// --- Styled Components (Unchanged) ---\nconst SingleDownloadCard = styled.div`\n  background: ${({\n  theme\n}) => theme.colors.surface};\n  border-radius: 18px;\n  padding: 36px 54px;\n  display: flex;\n  align-items: center;\n  box-shadow: 0 4px 32px #00000014;\n  margin: 40px auto 24px auto;\n  justify-content: flex-start;\n  max-width: 800px;\n  min-height: 180px;\n  position: relative;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n    padding: 24px;\n    text-align: center;\n  }\n`;\n_c = SingleDownloadCard;\nconst ProductImage = styled.img`\n  width: 180px;\n  height: 180px;\n  object-fit: cover;\n  margin-right: 34px;\n  background: #f5f5f5;\n  border-radius: 12px;\n  box-shadow: 0 2px 14px #0000001a;\n  flex-shrink: 0;\n\n  @media (max-width: 768px) {\n    margin-right: 0;\n    margin-bottom: 24px;\n    width: 160px;\n    height: 160px;\n  }\n`;\n_c2 = ProductImage;\nconst CardBadge = styled.div`\n  position: absolute;\n  top: ${({\n  $isPrimary\n}) => $isPrimary ? '8px' : '18px'};\n  left: ${({\n  $isPrimary\n}) => $isPrimary ? '8px' : 'auto'};\n  right: ${({\n  $isPrimary\n}) => $isPrimary ? 'auto' : '28px'};\n  background: ${({\n  theme,\n  $isPrimary\n}) => $isPrimary ? '#45ccbe' : theme.colors.button};\n  color: ${({\n  theme,\n  $isPrimary\n}) => $isPrimary ? '#fff' : theme.colors.primary};\n  font-weight: 700;\n  font-size: 12px;\n  padding: 3px 9px;\n  border-radius: 7px;\n  z-index: 2;\n  box-shadow: 0 1px 4px #0000001a;\n\n  @media (max-width: 768px) {\n    top: 16px;\n    left: ${({\n  $isPrimary\n}) => $isPrimary ? '16px' : 'auto'};\n    right: ${({\n  $isPrimary\n}) => $isPrimary ? 'auto' : '16px'};\n  }\n`;\n_c3 = CardBadge;\nconst InfoContainer = styled.div`\n  flex: 1;\n`;\n_c4 = InfoContainer;\nconst ProductName = styled.div`\n  font-size: 22px;\n  font-weight: 700;\n  color: ${({\n  theme\n}) => theme.colors.primary};\n  margin-bottom: 5px;\n\n  @media (max-width: 768px) {\n    font-size: 20px;\n  }\n`;\n_c5 = ProductName;\nconst MetaInfo = styled.div`\n  color: #6b6b8d;\n  font-size: 15px;\n  margin-bottom: 7px;\n  font-weight: 500;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0 18px;\n\n  b {\n    color: ${({\n  theme\n}) => theme.colors.textPrimary};\n  }\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n    gap: 8px;\n    align-items: center;\n  }\n`;\n_c6 = MetaInfo;\nconst OrderInfo = styled.div`\n  color: #444;\n  font-size: 13px;\n  margin: 6px 0 0 0;\n`;\n_c7 = OrderInfo;\nconst ActionButtons = styled.div`\n  margin-top: 19px;\n  display: flex;\n  gap: 14px;\n\n  @media (max-width: 768px) {\n    justify-content: center;\n    flex-direction: column;\n    align-items: stretch;\n  }\n`;\n_c8 = ActionButtons;\nconst FooterInfo = styled.div`\n  margin-top: 16px;\n  color: #a0a0c0;\n  font-size: 14px;\n`;\n_c9 = FooterInfo;\nconst HelpLinks = styled.div`\n  margin-top: 22px;\n  text-align: center;\n  color: #6b6b8d;\n  font-size: 15px;\n\n  a {\n    color: ${({\n  theme\n}) => theme.colors.primary};\n    text-decoration: underline;\n    font-weight: 500;\n  }\n`;\n_c0 = HelpLinks;\nconst PageHeader = styled.h2`\n  font-size: 24px;\n  font-weight: 600;\n  margin-bottom: 24px;\n`;\n_c1 = PageHeader;\nconst DownloadsTable = styled.div`\n  background-color: white;\n  border-radius: 16px;\n  border: 1px solid #EAEAEA;\n  overflow: hidden;\n`;\n_c10 = DownloadsTable;\nconst Row = styled.div`\n  display: grid;\n  grid-template-columns: 3fr 1fr 1fr 2fr;\n  align-items: center;\n  padding: 16px 24px;\n  border-bottom: 1px solid #f0f0f0;\n  &:last-child {\n    border-bottom: none;\n  }\n`;\n_c11 = Row;\nconst HeaderRow = styled(Row)`\n  background-color: #fafafa;\n  font-weight: 600;\n  color: #333;\n`;\n_c12 = HeaderRow;\nconst DataCell = styled.div`\n  color: #555;\n`;\n_c13 = DataCell;\nconst ButtonContainer = styled.div`\n  display: flex;\n  gap: 12px;\n  justify-content: flex-end;\n`;\n_c14 = ButtonContainer;\nconst PrimaryButton = styled.a`\n  display: inline-block;\n  background-color: #2c2c54;\n  color: white;\n  padding: 10px 20px;\n  border-radius: 8px;\n  text-decoration: none;\n  font-weight: 500;\n  font-size: 14px;\n  text-align: center;\n`;\n_c15 = PrimaryButton;\nconst SecondaryButton = styled(Link)`\n  display: inline-block;\n  background-color: ${({\n  theme\n}) => theme.colors.primary};\n  color: #ffffff;\n  /* (FIX 2) Corrected CSS syntax error */\n  border: 0.5px solid rgb(177, 177, 255);\n  padding: 10px 20px;\n  border-radius: 8px;\n  text-decoration: none;\n  font-weight: 500;\n  font-size: 14px;\n  text-align: center;\n\n  &:hover {\n    background-color: ${({\n  theme\n}) => theme.colors.primaryLight};\n    color: white;\n  }\n`;\n_c16 = SecondaryButton;\nconst MessageContainer = styled.div`\n  padding: 40px;\n  text-align: center;\n  color: #757575;\n  background-color: white;\n  border-radius: 12px;\n  border: 1px solid #EAEAEA;\n`;\n\n// --- The Page Component ---\n_c17 = MessageContainer;\nconst DownloadsPage = () => {\n  _s();\n  const {\n    user\n  } = useUser();\n  // Use the new Download type for state\n  const [downloads, setDownloads] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  useEffect(() => {\n    if (!user || !user.id) {\n      setIsLoading(false);\n      return;\n    }\n    const getPurchasedDownloads = async () => {\n      setIsLoading(true);\n      try {\n        const payload = {\n          method: 'GET',\n          endpoint: 'cwc/downloads',\n          user_id: user.id\n        };\n        const {\n          data: apiResponse,\n          error\n        } = await supabase.functions.invoke('get-wc-data', {\n          body: payload\n        });\n        if (error) throw error;\n\n        // --- (FIX 3) Complete data cleaning and validation logic ---\n        if (apiResponse && apiResponse.Success && Array.isArray(apiResponse.Data)) {\n          // Assert the type of the incoming data to avoid TS errors\n          const downloadsData = apiResponse.Data;\n\n          // 1. Create a unique list of downloads by download_id to prevent key errors\n          const uniqueDownloads = Array.from(new Map(downloadsData.map(item => [item.download_id, item])).values());\n\n          // 2. Filter the unique list for 'completed' orders to fix the logic bug\n          const validDownloads = uniqueDownloads.filter(download => download.order_status === 'completed');\n          setDownloads(validDownloads);\n        } else {\n          setDownloads([]);\n        }\n      } catch (error) {\n        console.error(\"Error fetching or processing downloads:\", error);\n        setDownloads([]);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    getPurchasedDownloads();\n  }, [user]);\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(MessageContainer, {\n      children: \"Loading your downloads...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 12\n    }, this);\n  }\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(MessageContainer, {\n      children: \"Please log in to view your downloads.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 12\n    }, this);\n  }\n  if (!downloads.length) {\n    return /*#__PURE__*/_jsxDEV(MessageContainer, {\n      children: \"You have no available downloads.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n      children: \"Downloads\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 7\n    }, this), downloads.length === 1 ? /*#__PURE__*/_jsxDEV(SingleDownloadCard, {\n      children: [/*#__PURE__*/_jsxDEV(CardBadge, {\n        $isPrimary: true,\n        children: \"Verified Purchase\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(CardBadge, {\n        children: \"Premium Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ProductImage, {\n        src: downloads[0].product_image || 'https://cdn-icons-png.flaticon.com/512/337/337946.png',\n        alt: downloads[0].product_name,\n        onError: e => {\n          const img = e.target;\n          img.onerror = null;\n          img.src = 'https://cdn-icons-png.flaticon.com/512/337/337946.png';\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(InfoContainer, {\n        children: [/*#__PURE__*/_jsxDEV(ProductName, {\n          children: downloads[0].product_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(MetaInfo, {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Downloads Left:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 21\n            }, this), \" \", downloads[0].downloads_remaining]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Expires:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 21\n            }, this), \" \", formatDate(downloads[0].access_expires)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Format:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 21\n            }, this), \" Digital\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(OrderInfo, {\n          children: [\"Order #: \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: downloads[0].order_id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 24\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ActionButtons, {\n          children: [/*#__PURE__*/_jsxDEV(PrimaryButton, {\n            href: downloads[0].download_url,\n            target: \"_blank\",\n            children: \"Download\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 15\n          }, this), downloads[0].supabase_file_id && /*#__PURE__*/_jsxDEV(SecondaryButton, {\n            to: `/practice/${downloads[0].supabase_file_id}`,\n            children: \"Practice\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(FooterInfo, {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              marginRight: 8\n            },\n            children: \"Trusted by 20,000+ students worldwide\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: 13\n            },\n            children: \"| Secure SSL Download\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(DownloadsTable, {\n      children: [/*#__PURE__*/_jsxDEV(HeaderRow, {\n        children: [/*#__PURE__*/_jsxDEV(DataCell, {\n          children: \"Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DataCell, {\n          children: \"Downloads Remaining\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DataCell, {\n          children: \"Expires\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DataCell, {\n          style: {\n            textAlign: 'right'\n          },\n          children: \"Actions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 11\n      }, this), downloads.map(item => /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(DataCell, {\n          children: item.product_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(DataCell, {\n          children: item.downloads_remaining\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(DataCell, {\n          children: formatDate(item.access_expires)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(DataCell, {\n          children: /*#__PURE__*/_jsxDEV(ButtonContainer, {\n            children: [/*#__PURE__*/_jsxDEV(PrimaryButton, {\n              href: item.download_url,\n              target: \"_blank\",\n              children: \"Download\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 19\n            }, this), item.supabase_file_id && /*#__PURE__*/_jsxDEV(SecondaryButton, {\n              to: `/practice/${item.supabase_file_id}`,\n              children: \"Practice\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 15\n        }, this)]\n      }, item.download_id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(HelpLinks, {\n      children: [\"Need help?\", ' ', /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/contact\",\n        children: \"Contact Support\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 9\n      }, this), ' ', \"|\", ' ', /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/faq\",\n        children: \"FAQ\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 310,\n    columnNumber: 5\n  }, this);\n};\n_s(DownloadsPage, \"f/bH4f3JSe8OiITGqwNFJie51CA=\", false, function () {\n  return [useUser];\n});\n_c18 = DownloadsPage;\nexport default DownloadsPage;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18;\n$RefreshReg$(_c, \"SingleDownloadCard\");\n$RefreshReg$(_c2, \"ProductImage\");\n$RefreshReg$(_c3, \"CardBadge\");\n$RefreshReg$(_c4, \"InfoContainer\");\n$RefreshReg$(_c5, \"ProductName\");\n$RefreshReg$(_c6, \"MetaInfo\");\n$RefreshReg$(_c7, \"OrderInfo\");\n$RefreshReg$(_c8, \"ActionButtons\");\n$RefreshReg$(_c9, \"FooterInfo\");\n$RefreshReg$(_c0, \"HelpLinks\");\n$RefreshReg$(_c1, \"PageHeader\");\n$RefreshReg$(_c10, \"DownloadsTable\");\n$RefreshReg$(_c11, \"Row\");\n$RefreshReg$(_c12, \"HeaderRow\");\n$RefreshReg$(_c13, \"DataCell\");\n$RefreshReg$(_c14, \"ButtonContainer\");\n$RefreshReg$(_c15, \"PrimaryButton\");\n$RefreshReg$(_c16, \"SecondaryButton\");\n$RefreshReg$(_c17, \"MessageContainer\");\n$RefreshReg$(_c18, \"DownloadsPage\");","map":{"version":3,"names":["React","useState","useEffect","styled","Link","useUser","supabase","jsxDEV","_jsxDEV","formatDate","dateString","date","Date","replace","isNaN","getTime","toLocaleDateString","year","month","day","SingleDownloadCard","div","theme","colors","surface","_c","ProductImage","img","_c2","CardBadge","$isPrimary","button","primary","_c3","InfoContainer","_c4","ProductName","_c5","MetaInfo","textPrimary","_c6","OrderInfo","_c7","ActionButtons","_c8","FooterInfo","_c9","HelpLinks","_c0","PageHeader","h2","_c1","DownloadsTable","_c10","Row","_c11","HeaderRow","_c12","DataCell","_c13","ButtonContainer","_c14","PrimaryButton","a","_c15","SecondaryButton","primaryLight","_c16","MessageContainer","_c17","DownloadsPage","_s","user","downloads","setDownloads","isLoading","setIsLoading","id","getPurchasedDownloads","payload","method","endpoint","user_id","data","apiResponse","error","functions","invoke","body","Success","Array","isArray","Data","downloadsData","uniqueDownloads","from","Map","map","item","download_id","values","validDownloads","filter","download","order_status","console","children","fileName","_jsxFileName","lineNumber","columnNumber","length","src","product_image","alt","product_name","onError","e","target","onerror","downloads_remaining","access_expires","order_id","href","download_url","supabase_file_id","to","style","marginRight","fontSize","textAlign","_c18","$RefreshReg$"],"sources":["/Users/megamac/Dev/GitHub/projects/certempire-react/src/pages/DownloadsPage.tsx"],"sourcesContent":["// src/pages/DownloadsPage.tsx\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Link } from 'react-router-dom';\nimport { useUser } from '../context/UserContext';\nimport { supabase } from '../supabaseClient';\n\n// --- (FIX 1) Define a clear type for a Download object ---\ntype Download = {\n  download_id: number | string;\n  order_status: string;\n  product_name: string;\n  product_image?: string;\n  downloads_remaining?: string | number;\n  access_expires?: string | null;\n  order_id?: number;\n  download_url?: string;\n  supabase_file_id?: string;\n};\n\n// --- Helper for UI ---\nconst formatDate = (dateString: string | null | undefined) => {\n  if (!dateString) return 'Never';\n  const date = new Date(dateString.replace(' ', 'T'));\n  if (isNaN(date.getTime())) return 'Never';\n  return date.toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n  });\n};\n\n// --- Styled Components (Unchanged) ---\nconst SingleDownloadCard = styled.div`\n  background: ${({ theme }) => theme.colors.surface};\n  border-radius: 18px;\n  padding: 36px 54px;\n  display: flex;\n  align-items: center;\n  box-shadow: 0 4px 32px #00000014;\n  margin: 40px auto 24px auto;\n  justify-content: flex-start;\n  max-width: 800px;\n  min-height: 180px;\n  position: relative;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n    padding: 24px;\n    text-align: center;\n  }\n`;\n\nconst ProductImage = styled.img`\n  width: 180px;\n  height: 180px;\n  object-fit: cover;\n  margin-right: 34px;\n  background: #f5f5f5;\n  border-radius: 12px;\n  box-shadow: 0 2px 14px #0000001a;\n  flex-shrink: 0;\n\n  @media (max-width: 768px) {\n    margin-right: 0;\n    margin-bottom: 24px;\n    width: 160px;\n    height: 160px;\n  }\n`;\n\nconst CardBadge = styled.div<{ $isPrimary?: boolean }>`\n  position: absolute;\n  top: ${({ $isPrimary }) => ($isPrimary ? '8px' : '18px')};\n  left: ${({ $isPrimary }) => ($isPrimary ? '8px' : 'auto')};\n  right: ${({ $isPrimary }) => ($isPrimary ? 'auto' : '28px')};\n  background: ${({ theme, $isPrimary }) => ($isPrimary ? '#45ccbe' : theme.colors.button)};\n  color: ${({ theme, $isPrimary }) => ($isPrimary ? '#fff' : theme.colors.primary)};\n  font-weight: 700;\n  font-size: 12px;\n  padding: 3px 9px;\n  border-radius: 7px;\n  z-index: 2;\n  box-shadow: 0 1px 4px #0000001a;\n\n  @media (max-width: 768px) {\n    top: 16px;\n    left: ${({ $isPrimary }) => ($isPrimary ? '16px' : 'auto')};\n    right: ${({ $isPrimary }) => ($isPrimary ? 'auto' : '16px')};\n  }\n`;\n\nconst InfoContainer = styled.div`\n  flex: 1;\n`;\n\nconst ProductName = styled.div`\n  font-size: 22px;\n  font-weight: 700;\n  color: ${({ theme }) => theme.colors.primary};\n  margin-bottom: 5px;\n\n  @media (max-width: 768px) {\n    font-size: 20px;\n  }\n`;\n\nconst MetaInfo = styled.div`\n  color: #6b6b8d;\n  font-size: 15px;\n  margin-bottom: 7px;\n  font-weight: 500;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0 18px;\n\n  b {\n    color: ${({ theme }) => theme.colors.textPrimary};\n  }\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n    gap: 8px;\n    align-items: center;\n  }\n`;\n\nconst OrderInfo = styled.div`\n  color: #444;\n  font-size: 13px;\n  margin: 6px 0 0 0;\n`;\n\nconst ActionButtons = styled.div`\n  margin-top: 19px;\n  display: flex;\n  gap: 14px;\n\n  @media (max-width: 768px) {\n    justify-content: center;\n    flex-direction: column;\n    align-items: stretch;\n  }\n`;\n\nconst FooterInfo = styled.div`\n  margin-top: 16px;\n  color: #a0a0c0;\n  font-size: 14px;\n`;\n\nconst HelpLinks = styled.div`\n  margin-top: 22px;\n  text-align: center;\n  color: #6b6b8d;\n  font-size: 15px;\n\n  a {\n    color: ${({ theme }) => theme.colors.primary};\n    text-decoration: underline;\n    font-weight: 500;\n  }\n`;\n\nconst PageHeader = styled.h2`\n  font-size: 24px;\n  font-weight: 600;\n  margin-bottom: 24px;\n`;\nconst DownloadsTable = styled.div`\n  background-color: white;\n  border-radius: 16px;\n  border: 1px solid #EAEAEA;\n  overflow: hidden;\n`;\nconst Row = styled.div`\n  display: grid;\n  grid-template-columns: 3fr 1fr 1fr 2fr;\n  align-items: center;\n  padding: 16px 24px;\n  border-bottom: 1px solid #f0f0f0;\n  &:last-child {\n    border-bottom: none;\n  }\n`;\nconst HeaderRow = styled(Row)`\n  background-color: #fafafa;\n  font-weight: 600;\n  color: #333;\n`;\nconst DataCell = styled.div`\n  color: #555;\n`;\nconst ButtonContainer = styled.div`\n  display: flex;\n  gap: 12px;\n  justify-content: flex-end;\n`;\nconst PrimaryButton = styled.a`\n  display: inline-block;\n  background-color: #2c2c54;\n  color: white;\n  padding: 10px 20px;\n  border-radius: 8px;\n  text-decoration: none;\n  font-weight: 500;\n  font-size: 14px;\n  text-align: center;\n`;\nconst SecondaryButton = styled(Link)`\n  display: inline-block;\n  background-color: ${({ theme }) => theme.colors.primary};\n  color: #ffffff;\n  /* (FIX 2) Corrected CSS syntax error */\n  border: 0.5px solid rgb(177, 177, 255);\n  padding: 10px 20px;\n  border-radius: 8px;\n  text-decoration: none;\n  font-weight: 500;\n  font-size: 14px;\n  text-align: center;\n\n  &:hover {\n    background-color: ${({ theme }) => theme.colors.primaryLight};\n    color: white;\n  }\n`;\nconst MessageContainer = styled.div`\n  padding: 40px;\n  text-align: center;\n  color: #757575;\n  background-color: white;\n  border-radius: 12px;\n  border: 1px solid #EAEAEA;\n`;\n\n// --- The Page Component ---\nconst DownloadsPage = () => {\n  const { user } = useUser();\n  // Use the new Download type for state\n  const [downloads, setDownloads] = useState<Download[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    if (!user || !user.id) {\n      setIsLoading(false);\n      return;\n    }\n    const getPurchasedDownloads = async () => {\n      setIsLoading(true);\n      try {\n        const payload = {\n          method: 'GET',\n          endpoint: 'cwc/downloads',\n          user_id: user.id\n        };\n\n        const { data: apiResponse, error } = await supabase.functions.invoke('get-wc-data', {\n          body: payload,\n        });\n\n        if (error) throw error;\n\n        // --- (FIX 3) Complete data cleaning and validation logic ---\n        if (apiResponse && apiResponse.Success && Array.isArray(apiResponse.Data)) {\n          // Assert the type of the incoming data to avoid TS errors\n          const downloadsData = apiResponse.Data as Download[];\n\n          // 1. Create a unique list of downloads by download_id to prevent key errors\n          const uniqueDownloads = Array.from(\n            new Map(downloadsData.map(item => [item.download_id, item])).values()\n          );\n\n          // 2. Filter the unique list for 'completed' orders to fix the logic bug\n          const validDownloads = uniqueDownloads.filter(\n            download => download.order_status === 'completed'\n          );\n\n          setDownloads(validDownloads);\n        } else {\n          setDownloads([]);\n        }\n\n      } catch (error) {\n        console.error(\"Error fetching or processing downloads:\", error);\n        setDownloads([]);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    getPurchasedDownloads();\n  }, [user]);\n\n  if (isLoading) {\n    return <MessageContainer>Loading your downloads...</MessageContainer>;\n  }\n  if (!user) {\n    return <MessageContainer>Please log in to view your downloads.</MessageContainer>;\n  }\n\n  if (!downloads.length) {\n    return (\n      <MessageContainer>\n        You have no available downloads.\n      </MessageContainer>\n    );\n  }\n\n  return (\n    <div>\n      <PageHeader>Downloads</PageHeader>\n      {downloads.length === 1 ? (\n        <SingleDownloadCard>\n          <CardBadge $isPrimary>Verified Purchase</CardBadge>\n          <CardBadge>Premium Product</CardBadge>\n          <ProductImage\n            src={downloads[0].product_image || 'https://cdn-icons-png.flaticon.com/512/337/337946.png'}\n            alt={downloads[0].product_name}\n            onError={e => {\n              const img = e.target as HTMLImageElement;\n              img.onerror = null;\n              img.src = 'https://cdn-icons-png.flaticon.com/512/337/337946.png';\n            }}\n          />\n          <InfoContainer>\n            <ProductName>{downloads[0].product_name}</ProductName>\n            <MetaInfo>\n              <span><b>Downloads Left:</b> {downloads[0].downloads_remaining}</span>\n              <span><b>Expires:</b> {formatDate(downloads[0].access_expires)}</span>\n              <span><b>Format:</b> Digital</span>\n            </MetaInfo>\n            <OrderInfo>\n              Order #: <b>{downloads[0].order_id}</b>\n            </OrderInfo>\n            <ActionButtons>\n              <PrimaryButton href={downloads[0].download_url} target=\"_blank\">Download</PrimaryButton>\n              {downloads[0].supabase_file_id && (\n                <SecondaryButton to={`/practice/${downloads[0].supabase_file_id}`}>Practice</SecondaryButton>\n              )}\n            </ActionButtons>\n            <FooterInfo>\n              <span style={{ marginRight: 8 }}>Trusted by 20,000+ students worldwide</span>\n              <span style={{ fontSize: 13 }}>| Secure SSL Download</span>\n            </FooterInfo>\n          </InfoContainer>\n        </SingleDownloadCard>\n      ) : (\n        <DownloadsTable>\n          <HeaderRow>\n            <DataCell>Product</DataCell>\n            <DataCell>Downloads Remaining</DataCell>\n            <DataCell>Expires</DataCell>\n            <DataCell style={{ textAlign: 'right' }}>Actions</DataCell>\n          </HeaderRow>\n          {downloads.map((item: Download) => (\n            <Row key={item.download_id}>\n              <DataCell>{item.product_name}</DataCell>\n              <DataCell>{item.downloads_remaining}</DataCell>\n              {/* (FIX 4) Use formatDate for consistent dates */}\n              <DataCell>{formatDate(item.access_expires)}</DataCell>\n              <DataCell>\n                <ButtonContainer>\n                  <PrimaryButton href={item.download_url} target=\"_blank\">Download</PrimaryButton>\n                  {item.supabase_file_id && (\n                    <SecondaryButton to={`/practice/${item.supabase_file_id}`}>Practice</SecondaryButton>\n                  )}\n                </ButtonContainer>\n              </DataCell>\n            </Row>\n          ))}\n        </DownloadsTable>\n      )}\n      <HelpLinks>\n        Need help?{' '}\n        <a href=\"/contact\">Contact Support</a>\n        {' '}|{' '}\n        <a href=\"/faq\">FAQ</a>\n      </HelpLinks>\n    </div>\n  );\n};\n\nexport default DownloadsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}